2025-09-13T00:12:01.952+08:00  INFO 32516 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 32516 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T00:12:01.954+08:00  INFO 32516 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T00:12:02.453+08:00  INFO 32516 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T00:12:02.462+08:00  INFO 32516 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T00:12:02.463+08:00  INFO 32516 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T00:12:02.497+08:00  INFO 32516 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T00:12:02.498+08:00  INFO 32516 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 519 ms
2025-09-13T00:12:02.859+08:00  INFO 32516 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T00:12:02.862+08:00  INFO 32516 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 1.212 seconds (process running for 1.595)
2025-09-13T00:12:28.858+08:00  INFO 32516 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T00:12:28.858+08:00  INFO 32516 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T00:12:28.859+08:00  INFO 32516 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T00:12:28.939+08:00  INFO 32516 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : [mock] /nested time1=20250909110000, time2=20250909111000
2025-09-13T00:12:28.945+08:00 ERROR 32516 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException] with root cause

java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209) ~[na:na]
	at java.base/java.util.ImmutableCollections$MapN.<init>(ImmutableCollections.java:1186) ~[na:na]
	at java.base/java.util.Map.of(Map.java:1445) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:74) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T00:13:33.422+08:00  INFO 32516 --- [score-api] [http-nio-8090-exec-4] c.e.score.api.ScoreControllerNested      : [mock] /nested time1=20250909110000, time2=20250909111000
2025-09-13T00:13:33.423+08:00 ERROR 32516 --- [score-api] [http-nio-8090-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException] with root cause

java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209) ~[na:na]
	at java.base/java.util.ImmutableCollections$MapN.<init>(ImmutableCollections.java:1186) ~[na:na]
	at java.base/java.util.Map.of(Map.java:1445) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:74) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T00:13:57.173+08:00  INFO 32516 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T00:13:57.196+08:00  INFO 32516 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T00:15:45.965+08:00  INFO 32292 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 32292 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T00:15:45.966+08:00  INFO 32292 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T00:15:46.379+08:00  INFO 32292 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T00:15:46.386+08:00  INFO 32292 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T00:15:46.386+08:00  INFO 32292 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T00:15:46.414+08:00  INFO 32292 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T00:15:46.414+08:00  INFO 32292 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 426 ms
2025-09-13T00:15:46.688+08:00  INFO 32292 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T00:15:46.693+08:00  INFO 32292 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.962 seconds (process running for 1.248)
2025-09-13T00:16:28.228+08:00  INFO 32292 --- [score-api] [http-nio-8090-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T00:16:28.229+08:00  INFO 32292 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T00:16:28.229+08:00  INFO 32292 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T00:16:28.272+08:00  INFO 32292 --- [score-api] [http-nio-8090-exec-2] c.e.score.api.ScoreControllerNested      : [mock] /nested time1=20250909110000, time2=20250909111000
2025-09-13T00:20:00.969+08:00  INFO 32292 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T00:20:00.993+08:00  INFO 32292 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T00:25:36.744+08:00  INFO 10044 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 10044 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T00:25:36.745+08:00  INFO 10044 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T00:25:37.183+08:00  INFO 10044 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T00:25:37.189+08:00  INFO 10044 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T00:25:37.190+08:00  INFO 10044 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T00:25:37.220+08:00  INFO 10044 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T00:25:37.220+08:00  INFO 10044 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 455 ms
2025-09-13T00:25:37.496+08:00  INFO 10044 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T00:25:37.500+08:00  INFO 10044 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 1.001 seconds (process running for 1.299)
2025-09-13T00:26:02.017+08:00  INFO 10044 --- [score-api] [http-nio-8090-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T00:26:02.017+08:00  INFO 10044 --- [score-api] [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T00:26:02.018+08:00  INFO 10044 --- [score-api] [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T00:26:02.060+08:00  INFO 10044 --- [score-api] [http-nio-8090-exec-3] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T00:26:02.072+08:00  INFO 10044 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T00:26:04.167+08:00  INFO 10044 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@164928c
2025-09-13T00:26:04.169+08:00  INFO 10044 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T00:26:04.894+08:00 ERROR 10044 --- [score-api] [http-nio-8090-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-206, SQLSTATE=42703, SQLERRMC=D.DATA_TIME, DRIVER=4.34.30
### The error may exist in file [F:\Users\lenovo\Desktop\score-api\target\classes\mapper\ScoreMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: WITH             -- 两个时间点的数据（子指数打分快照）             sub_at_time AS (                 SELECT                     d.SUBINDEX_ID,                     d.DATA_TIME,                     d.SUBINDEX_VALUE,                     -- 若有炉号/模型可在此追加过滤列：d.BLAST_ID, d.MODEL_ID                     VARCHAR_FORMAT(d.DATA_TIME, 'YYYYMMDDHH24MISS') AS markTime                 FROM T_MD_DIAGNOSE_MODEL_DATA_SUBINDEX d                 WHERE d.DATA_TIME IN (                                       TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS'),                                       TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS')                     )             )         SELECT             -- markTime（顶层）             s.markTime                                        AS markTime,              -- 子指数（第一层）             si.SUBINDEX_NAME                                  AS subIndexName,             si.INDEX_ID                                       AS subIndexCode,             si.WEIGHT                                         AS subIndexWeight,             s.SUBINDEX_VALUE                                  AS subIndexValue,              -- 评价参数（第二层）             psi.NAME                                          AS paramName,             w.PARAM_SCORE_ID                                  AS paramCode,             w.WEIGHT                                          AS paramWeight,             psd.DATA_VALUE                                    AS paramValue,              -- 基础参数（第三层）             b.BASIC_PARAM_NAME                                AS basicName,             b.BASIC_PARAM_ID                                  AS basicCode,             b.UNIT                                            AS basicUnit,             CAST(NULL AS DECIMAL(18,4))                       AS basicValue   -- 先占位；后续用动态表路由取值          FROM sub_at_time s                  JOIN T_MD_DIAGNOSE_MODEL_SUBINDEX_INFO si                       ON si.SUBINDEX_ID = s.SUBINDEX_ID                   LEFT JOIN T_MD_DIAGNOSE_MODEL_PARAM_WEIGHT w                            ON w.SUBINDEX_ID = s.SUBINDEX_ID                   LEFT JOIN T_MD_DIAGNOSE_PARAM_SCORE_INFO psi                            ON psi.PARAM_SCORE_ID = w.PARAM_SCORE_ID                   LEFT JOIN T_MD_DIAGNOSE_PARAM_SCORE_DATA psd                            ON psd.PARAM_SCORE_ID = w.PARAM_SCORE_ID                                AND psd.DATA_TIME     = s.DATA_TIME             /* 若表里有 BLAST_ID / MODEL_ID，可在此与 s.* 对齐以限定同一高炉/模型的数据 */              -- 解析公式：找出一个评价参数涉及到的所有基础参数                  LEFT JOIN T_MD_DIAGNOSE_PARAM_SCORE_CALCULATE_RULE r                            ON r.PARAM_SCORE_ID = w.PARAM_SCORE_ID                   LEFT JOIN T_MD_DIAGNOSE_BASIC_PARAM_INFO b                            ON LOCATE(b.BASIC_PARAM_ID, r.FORMULA) > 0          ORDER BY s.markTime ASC, si.INDEX_ID, w.PARAM_SCORE_ID, b.BASIC_PARAM_ID
### Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-206, SQLSTATE=42703, SQLERRMC=D.DATA_TIME, DRIVER=4.34.30
; bad SQL grammar []] with root cause

com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-206, SQLSTATE=42703, SQLERRMC=D.DATA_TIME, DRIVER=4.34.30
	at com.ibm.db2.jcc.am.b5.a(b5.java:810) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:66) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:140) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.c(kq.java:2890) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.d(kq.java:2874) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.a(kq.java:2278) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:8479) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.i(aa.java:202) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.b(aa.java:92) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.p.a(p.java:32) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.au.i(au.java:150) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.al(kq.java:2247) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bq(kr.java:3909) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:4792) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.b(kr.java:4363) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bg(kr.java:3027) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.execute(kr.java:3002) ~[db2jcc-4.34.30.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-6.3.2.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:125) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T01:00:23.127+08:00  INFO 10044 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T01:00:23.150+08:00  INFO 10044 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T01:00:23.152+08:00  INFO 10044 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T01:00:23.153+08:00  INFO 10044 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T01:02:10.816+08:00  INFO 26212 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 26212 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T01:02:10.817+08:00  INFO 26212 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T01:02:11.215+08:00  INFO 26212 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T01:02:11.221+08:00  INFO 26212 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T01:02:11.221+08:00  INFO 26212 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T01:02:11.261+08:00  INFO 26212 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T01:02:11.261+08:00  INFO 26212 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 424 ms
2025-09-13T01:02:11.570+08:00  INFO 26212 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T01:02:11.574+08:00  INFO 26212 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.99 seconds (process running for 1.276)
2025-09-13T01:02:17.228+08:00  INFO 26212 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T01:02:17.230+08:00  INFO 26212 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T01:02:17.230+08:00  INFO 26212 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T01:02:17.274+08:00  INFO 26212 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T01:02:17.283+08:00  INFO 26212 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T01:02:18.045+08:00  INFO 26212 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@2c26c606
2025-09-13T01:02:18.046+08:00  INFO 26212 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T01:02:18.500+08:00 ERROR 26212 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-206, SQLSTATE=42703, SQLERRMC=PSD.GENERATE_TIME, DRIVER=4.34.30
### The error may exist in file [F:\Users\lenovo\Desktop\score-api\target\classes\mapper\ScoreMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: WITH sub_at_time AS (             SELECT                 d.SUBINDEX_ID,                 d.GENERATE_TIME,                 d.SUBINDEX_VALUE,                 VARCHAR_FORMAT(d.GENERATE_TIME, 'YYYYMMDDHH24MISS') AS markTime             FROM T_MD_DIAGNOSE_MODEL_DATA_SUBINDEX d             WHERE d.GENERATE_TIME IN (                                       TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS'),                                       TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS')                 )         )         SELECT             -- 顶层             s.markTime                                        AS markTime,              -- 子指数（第一层）             si.SUBINDEX_NAME                                  AS subIndexName,             si.INDEX_ID                                       AS subIndexCode,             si.WEIGHT                                         AS subIndexWeight,             s.SUBINDEX_VALUE                                  AS subIndexValue,              -- 评价参数（第二层）             psi.NAME                                          AS paramName,             w.PARAM_SCORE_ID                                  AS paramCode,             w.WEIGHT                                          AS paramWeight,             psd.DATA_VALUE                                    AS paramValue,              -- 基础参数（第三层，值稍后回填）             b.BASIC_PARAM_NAME                                AS basicName,             b.BASIC_PARAM_ID                                  AS basicCode,             b.UNIT                                            AS basicUnit,             CAST(NULL AS DECIMAL(18,4))                       AS basicValue,              -- 动态取值所需（第三层）             bi.BLAST_NAME                                     AS blastName,             b.CHUNBIAO_ID                                     AS procParamId   -- = 各 PROCESSDATA_* 表里的 PARAMID          FROM sub_at_time s                  JOIN T_MD_DIAGNOSE_MODEL_SUBINDEX_INFO si                       ON si.SUBINDEX_ID = s.SUBINDEX_ID                   LEFT JOIN T_MD_DIAGNOSE_MODEL_PARAM_WEIGHT w                            ON w.SUBINDEX_ID = s.SUBINDEX_ID                   LEFT JOIN T_MD_DIAGNOSE_PARAM_SCORE_INFO psi                            ON psi.PARAM_SCORE_ID = w.PARAM_SCORE_ID                   LEFT JOIN T_MD_DIAGNOSE_PARAM_SCORE_DATA psd                            ON psd.PARAM_SCORE_ID = w.PARAM_SCORE_ID                                AND psd.GENERATE_TIME = s.GENERATE_TIME                   LEFT JOIN T_MD_DIAGNOSE_PARAM_SCORE_CALCULATE_RULE r                            ON r.PARAM_SCORE_ID = w.PARAM_SCORE_ID                   LEFT JOIN T_MD_DIAGNOSE_BASIC_PARAM_INFO b                            ON LOCATE(b.BASIC_PARAM_ID, r.FORMULA) > 0                   LEFT JOIN T_MD_DIAGNOSE_BLAST_INFO bi                            ON bi.BLAST_ID = b.BLAST_ID          ORDER BY s.markTime ASC, si.INDEX_ID, w.PARAM_SCORE_ID, b.BASIC_PARAM_ID
### Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-206, SQLSTATE=42703, SQLERRMC=PSD.GENERATE_TIME, DRIVER=4.34.30
; bad SQL grammar []] with root cause

com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-206, SQLSTATE=42703, SQLERRMC=PSD.GENERATE_TIME, DRIVER=4.34.30
	at com.ibm.db2.jcc.am.b5.a(b5.java:810) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:66) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:140) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.c(kq.java:2890) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.d(kq.java:2874) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.a(kq.java:2278) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:8479) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.i(aa.java:202) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.b(aa.java:92) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.p.a(p.java:32) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.au.i(au.java:150) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.al(kq.java:2247) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bq(kr.java:3909) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:4792) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.b(kr.java:4363) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bg(kr.java:3027) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.execute(kr.java:3002) ~[db2jcc-4.34.30.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-6.3.2.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:65) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T01:07:05.737+08:00  INFO 26212 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T01:07:05.761+08:00  INFO 26212 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T01:07:05.763+08:00  INFO 26212 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T01:07:05.765+08:00  INFO 26212 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T01:07:07.115+08:00  INFO 2900 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 2900 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T01:07:07.116+08:00  INFO 2900 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T01:07:07.542+08:00  INFO 2900 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T01:07:07.547+08:00  INFO 2900 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T01:07:07.548+08:00  INFO 2900 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T01:07:07.577+08:00  INFO 2900 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T01:07:07.577+08:00  INFO 2900 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 440 ms
2025-09-13T01:07:07.848+08:00  INFO 2900 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T01:07:07.852+08:00  INFO 2900 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.996 seconds (process running for 1.352)
2025-09-13T01:07:13.713+08:00  INFO 2900 --- [score-api] [http-nio-8090-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T01:07:13.714+08:00  INFO 2900 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T01:07:13.714+08:00  INFO 2900 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T01:07:13.755+08:00  INFO 2900 --- [score-api] [http-nio-8090-exec-2] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T01:07:13.764+08:00  INFO 2900 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T01:07:14.486+08:00  INFO 2900 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@1b808dd7
2025-09-13T01:07:14.487+08:00  INFO 2900 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T01:14:33.650+08:00  INFO 2900 --- [score-api] [http-nio-8090-exec-5] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T01:15:48.843+08:00  INFO 2900 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T01:15:48.895+08:00  INFO 2900 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T01:15:48.898+08:00  INFO 2900 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T01:15:48.901+08:00  INFO 2900 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T01:15:50.604+08:00  INFO 940 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 940 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T01:15:50.605+08:00  INFO 940 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T01:15:50.998+08:00  INFO 940 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T01:15:51.004+08:00  INFO 940 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T01:15:51.004+08:00  INFO 940 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T01:15:51.030+08:00  INFO 940 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T01:15:51.030+08:00  INFO 940 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 404 ms
2025-09-13T01:15:51.292+08:00  INFO 940 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T01:15:51.296+08:00  INFO 940 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.955 seconds (process running for 1.264)
2025-09-13T01:15:54.177+08:00  INFO 940 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T01:15:54.177+08:00  INFO 940 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T01:15:54.178+08:00  INFO 940 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T01:15:54.220+08:00  INFO 940 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T01:15:54.229+08:00  INFO 940 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T01:15:55.008+08:00  INFO 940 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@22685da0
2025-09-13T01:15:55.009+08:00  INFO 940 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T01:18:07.314+08:00  INFO 940 --- [score-api] [http-nio-8090-exec-5] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T01:18:15.308+08:00  INFO 940 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T01:18:45.217+08:00  WARN 940 --- [score-api] [http-nio-8090-exec-5] com.zaxxer.hikari.pool.ProxyConnection   : HikariPool-1 - Connection com.ibm.db2.jcc.t4.b@4c5fa69a marked as broken because of SQLSTATE(08001), ErrorCode(-4499)

com.ibm.db2.jcc.am.DisconnectNonTransientConnectionException: [jcc][t4][2030][11211][4.34.30] 在对连接的底层 socket、socket input stream 或 socket output stream 执行操作期间
发生通信错误。错误位置：Reply.fill() - insufficient data (-1)。消息：数据不足。 ERRORCODE=-4499, SQLSTATE=08001
	at com.ibm.db2.jcc.am.b5.a(b5.java:338) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.a(a.java:588) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.a(a.java:572) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.a(a.java:567) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.b(x.java:315) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.c(x.java:342) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.c(x.java:455) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.v(x.java:1230) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.h(aa.java:165) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.p.g(p.java:93) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.b.readSetGenericSQLSetInfo_(b.java:3394) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.dy.b(dy.java:67) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.d0.b(d0.java:196) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.Agent.readPiggybackCommands(Agent.java:648) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.Agent.beginReadChain(Agent.java:394) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.beginReadChain(a.java:871) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.Agent.flow(Agent.java:267) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:4750) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.b(kr.java:4363) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bg(kr.java:3027) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.execute(kr.java:3002) ~[db2jcc-4.34.30.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-6.3.2.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:65) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T01:18:45.217+08:00  WARN 940 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.pool.ProxyConnection   : HikariPool-1 - Connection com.ibm.db2.jcc.t4.b@22685da0 marked as broken because of SQLSTATE(08001), ErrorCode(-4499)

com.ibm.db2.jcc.am.DisconnectNonTransientConnectionException: [jcc][t4][2030][11211][4.34.30] 在对连接的底层 socket、socket input stream 或 socket output stream 执行操作期间
发生通信错误。错误位置：Reply.fill() - insufficient data (-1)。消息：数据不足。 ERRORCODE=-4499, SQLSTATE=08001
	at com.ibm.db2.jcc.am.b5.a(b5.java:338) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.a(a.java:588) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.a(a.java:572) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.a(a.java:567) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.b(x.java:315) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.c(x.java:342) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.c(x.java:455) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.v(x.java:1230) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.h(aa.java:165) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.p.g(p.java:93) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.b.readSetGenericSQLSetInfo_(b.java:3394) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.dy.b(dy.java:67) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.d0.b(d0.java:196) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.Agent.readPiggybackCommands(Agent.java:648) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.Agent.beginReadChain(Agent.java:394) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.beginReadChain(a.java:871) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.Agent.flow(Agent.java:267) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:4750) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.b(kr.java:4363) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bg(kr.java:3027) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.execute(kr.java:3002) ~[db2jcc-4.34.30.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-6.3.2.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:65) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T01:18:45.271+08:00  WARN 940 --- [score-api] [http-nio-8090-exec-5] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@5098ca16 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:18:45.272+08:00  WARN 940 --- [score-api] [http-nio-8090-exec-5] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@4093c10e ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:18:45.272+08:00  WARN 940 --- [score-api] [http-nio-8090-exec-5] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@39766c03 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:18:45.272+08:00  WARN 940 --- [score-api] [http-nio-8090-exec-5] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@230db11a ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:18:45.272+08:00  WARN 940 --- [score-api] [http-nio-8090-exec-5] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@35530717 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:18:45.273+08:00  WARN 940 --- [score-api] [http-nio-8090-exec-5] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@6b163b02 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:18:45.273+08:00  WARN 940 --- [score-api] [http-nio-8090-exec-5] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@610a5417 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:18:45.273+08:00  WARN 940 --- [score-api] [http-nio-8090-exec-5] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@2fc1bc4d ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:18:45.336+08:00  INFO 940 --- [score-api] [SpringApplicationShutdownHook] o.s.c.support.DefaultLifecycleProcessor  : Shutdown phase 2147482623 ends with 1 bean still running after timeout of 30000ms: [webServerGracefulShutdown]
2025-09-13T01:18:45.337+08:00  WARN 940 --- [score-api] [http-nio-8090-exec-5] o.s.jdbc.support.SQLErrorCodesFactory    : Error while extracting database name

org.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta-data
	at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:357) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes(SQLErrorCodesFactory.java:242) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.lambda$setDataSource$0(SQLErrorCodeSQLExceptionTranslator.java:147) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.util.function.SingletonSupplier.get(SingletonSupplier.java:106) ~[spring-core-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.setDataSource(SQLErrorCodeSQLExceptionTranslator.java:148) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.<init>(SQLErrorCodeSQLExceptionTranslator.java:109) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.mybatis.spring.MyBatisExceptionTranslator.lambda$new$0(MyBatisExceptionTranslator.java:57) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.mybatis.spring.MyBatisExceptionTranslator.initExceptionTranslator(MyBatisExceptionTranslator.java:113) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:65) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:331) ~[spring-jdbc-6.2.10.jar:6.2.10]
	... 67 common frames omitted
Caused by: java.sql.SQLException: HikariPool-1 - Interrupted during connection acquisition
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:188) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:142) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:127) ~[HikariCP-6.3.2.jar:na]
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81) ~[spring-jdbc-6.2.10.jar:6.2.10]
	... 68 common frames omitted
Caused by: java.lang.InterruptedException: null
	at java.base/java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:906) ~[na:na]
	at com.zaxxer.hikari.util.ConcurrentBag.borrow(ConcurrentBag.java:162) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:160) ~[HikariCP-6.3.2.jar:na]
	... 73 common frames omitted

2025-09-13T01:18:45.338+08:00  WARN 940 --- [score-api] [http-nio-8090-exec-1] o.s.jdbc.support.SQLErrorCodesFactory    : Error while extracting database name

org.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta-data
	at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:357) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes(SQLErrorCodesFactory.java:242) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.lambda$setDataSource$0(SQLErrorCodeSQLExceptionTranslator.java:147) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.util.function.SingletonSupplier.get(SingletonSupplier.java:106) ~[spring-core-6.2.10.jar:6.2.10]
	at org.springframework.util.function.SupplierUtils.resolve(SupplierUtils.java:40) ~[spring-core-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.getSqlErrorCodes(SQLErrorCodeSQLExceptionTranslator.java:178) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:201) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:95) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:65) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:331) ~[spring-jdbc-6.2.10.jar:6.2.10]
	... 67 common frames omitted
Caused by: java.sql.SQLException: HikariPool-1 - Interrupted during connection acquisition
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:188) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:142) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:127) ~[HikariCP-6.3.2.jar:na]
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81) ~[spring-jdbc-6.2.10.jar:6.2.10]
	... 68 common frames omitted
Caused by: java.lang.InterruptedException: null
	at java.base/java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:906) ~[na:na]
	at com.zaxxer.hikari.util.ConcurrentBag.borrow(ConcurrentBag.java:162) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:160) ~[HikariCP-6.3.2.jar:na]
	... 73 common frames omitted

2025-09-13T01:18:45.339+08:00  WARN 940 --- [score-api] [http-nio-8090-exec-5] o.s.jdbc.support.SQLErrorCodesFactory    : Error while extracting database name

org.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta-data
	at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:357) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes(SQLErrorCodesFactory.java:242) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.lambda$setDataSource$0(SQLErrorCodeSQLExceptionTranslator.java:147) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.util.function.SingletonSupplier.get(SingletonSupplier.java:106) ~[spring-core-6.2.10.jar:6.2.10]
	at org.springframework.util.function.SupplierUtils.resolve(SupplierUtils.java:40) ~[spring-core-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.getSqlErrorCodes(SQLErrorCodeSQLExceptionTranslator.java:178) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:201) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:95) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:65) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:331) ~[spring-jdbc-6.2.10.jar:6.2.10]
	... 67 common frames omitted
Caused by: java.sql.SQLException: HikariPool-1 - Interrupted during connection acquisition
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:188) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:142) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:127) ~[HikariCP-6.3.2.jar:na]
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118) ~[spring-jdbc-6.2.10.jar:6.2.10]
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81) ~[spring-jdbc-6.2.10.jar:6.2.10]
	... 68 common frames omitted
Caused by: java.lang.InterruptedException: null
	at java.base/java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:906) ~[na:na]
	at com.zaxxer.hikari.util.ConcurrentBag.borrow(ConcurrentBag.java:162) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:160) ~[HikariCP-6.3.2.jar:na]
	... 73 common frames omitted

2025-09-13T01:18:45.365+08:00  INFO 940 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T01:18:45.372+08:00  INFO 940 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown aborted with one or more requests still active
2025-09-13T01:18:45.497+08:00  INFO 940 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T01:18:47.053+08:00  INFO 31612 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 31612 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T01:18:47.057+08:00  INFO 31612 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T01:18:47.590+08:00  INFO 31612 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T01:18:47.597+08:00  INFO 31612 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T01:18:47.597+08:00  INFO 31612 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T01:18:47.632+08:00  INFO 31612 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T01:18:47.632+08:00  INFO 31612 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 551 ms
2025-09-13T01:18:47.953+08:00  INFO 31612 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T01:18:47.958+08:00  INFO 31612 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 1.215 seconds (process running for 1.539)
2025-09-13T01:18:48.738+08:00  INFO 31612 --- [score-api] [http-nio-8090-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T01:18:48.738+08:00  INFO 31612 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T01:18:48.739+08:00  INFO 31612 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T01:18:48.782+08:00  INFO 31612 --- [score-api] [http-nio-8090-exec-2] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T01:18:48.792+08:00  INFO 31612 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T01:18:49.178+08:00  INFO 31612 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@789b175c
2025-09-13T01:18:49.188+08:00  INFO 31612 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T01:18:57.486+08:00  INFO 31612 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T01:19:11.401+08:00  INFO 4832 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 4832 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T01:19:11.403+08:00  INFO 4832 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T01:19:11.830+08:00  INFO 4832 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T01:19:11.836+08:00  INFO 4832 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T01:19:11.836+08:00  INFO 4832 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T01:19:11.865+08:00  INFO 4832 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T01:19:11.865+08:00  INFO 4832 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 413 ms
2025-09-13T01:19:12.125+08:00  INFO 4832 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T01:19:12.130+08:00  INFO 4832 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.997 seconds (process running for 1.305)
2025-09-13T01:19:14.717+08:00  INFO 4832 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T01:19:14.740+08:00  INFO 4832 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T01:19:17.443+08:00  INFO 17232 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 17232 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T01:19:17.444+08:00  INFO 17232 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T01:19:17.840+08:00  INFO 17232 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T01:19:17.846+08:00  INFO 17232 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T01:19:17.846+08:00  INFO 17232 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T01:19:17.872+08:00  INFO 17232 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T01:19:17.872+08:00  INFO 17232 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 410 ms
2025-09-13T01:19:18.142+08:00  INFO 17232 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T01:19:18.145+08:00  INFO 17232 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.931 seconds (process running for 1.206)
2025-09-13T01:19:21.303+08:00  INFO 17232 --- [score-api] [http-nio-8090-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T01:19:21.303+08:00  INFO 17232 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T01:19:21.304+08:00  INFO 17232 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T01:19:21.345+08:00  INFO 17232 --- [score-api] [http-nio-8090-exec-2] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T01:19:21.355+08:00  INFO 17232 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T01:19:21.688+08:00  INFO 17232 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@cff5208
2025-09-13T01:19:21.689+08:00  INFO 17232 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T01:19:36.943+08:00  WARN 17232 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.ProxyConnection   : HikariPool-1 - Connection com.ibm.db2.jcc.t4.b@cff5208 marked as broken because of SQLSTATE(08001), ErrorCode(-4499)

com.ibm.db2.jcc.am.DisconnectNonTransientConnectionException: [jcc][t4][2030][11211][4.34.30] 在对连接的底层 socket、socket input stream 或 socket output stream 执行操作期间
发生通信错误。错误位置：Reply.fill() - insufficient data (-1)。消息：数据不足。 ERRORCODE=-4499, SQLSTATE=08001
	at com.ibm.db2.jcc.am.b5.a(b5.java:338) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.a(a.java:588) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.a(a.java:572) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.a(a.java:567) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.b(x.java:315) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.c(x.java:342) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.c(x.java:455) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.v(x.java:1230) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.h(aa.java:165) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.p.g(p.java:93) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.b.readSetGenericSQLSetInfo_(b.java:3394) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.dy.b(dy.java:67) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.d0.b(d0.java:196) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.Agent.readPiggybackCommands(Agent.java:648) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.Agent.beginReadChain(Agent.java:394) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.beginReadChain(a.java:871) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.Agent.flow(Agent.java:267) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:4750) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.b(kr.java:4363) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bg(kr.java:3027) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.execute(kr.java:3002) ~[db2jcc-4.34.30.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-6.3.2.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:65) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T01:19:36.994+08:00  WARN 17232 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@766e9fb2 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:19:36.995+08:00  WARN 17232 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@20f444f9 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:19:36.995+08:00  WARN 17232 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@40a8bd9e ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:19:36.996+08:00  WARN 17232 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@412e38d0 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:19:36.996+08:00  WARN 17232 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@433fac48 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:19:36.996+08:00  WARN 17232 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@416eeb5a ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:19:36.997+08:00  WARN 17232 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@44afeaa4 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:19:36.997+08:00  WARN 17232 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@7477a259 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:19:36.997+08:00  WARN 17232 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@4a140d73 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T01:19:37.502+08:00 ERROR 17232 --- [score-api] [http-nio-8090-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataAccessResourceFailureException: 
### Error querying database.  Cause: com.ibm.db2.jcc.am.DisconnectNonTransientConnectionException: [jcc][t4][2030][11211][4.34.30] 在对连接的底层 socket、socket input stream 或 socket output stream 执行操作期间
发生通信错误。错误位置：Reply.fill() - insufficient data (-1)。消息：数据不足。 ERRORCODE=-4499, SQLSTATE=08001
### The error may exist in file [F:\Users\lenovo\Desktop\score-api\target\classes\mapper\ScoreMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: WITH sub_at_time AS (             SELECT                 d.SUBINDEX_ID,                 d.GENERATE_TIME,                 d.SUBINDEX_VALUE,                 VARCHAR_FORMAT(d.GENERATE_TIME, 'YYYYMMDDHH24MISS') AS markTime             FROM T_MD_DIAGNOSE_MODEL_DATA_SUBINDEX d             WHERE (                 d.GENERATE_TIME BETWEEN TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS')                     AND TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS                 ) OR (                 d.GENERATE_TIME BETWEEN TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS')                     AND TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS                 )         )         SELECT             -- 顶层             s.markTime                                        AS markTime,              -- 子指数（第一层）             si.SUBINDEX_NAME                                  AS subIndexName,             si.INDEX_ID                                       AS subIndexCode,             si.WEIGHT                                         AS subIndexWeight,             s.SUBINDEX_VALUE                                  AS subIndexValue,              -- 评价参数（第二层）             psi.NAME                                          AS paramName,             w.PARAM_SCORE_ID                                  AS paramCode,             w.WEIGHT                                          AS paramWeight,             psd.DATA_VALUE                                    AS paramValue,              -- 基础参数（第三层，值稍后回填）             b.BASIC_PARAM_NAME                                AS basicName,             b.BASIC_PARAM_ID                                  AS basicCode,             b.UNIT                                            AS basicUnit,             CAST(NULL AS DECIMAL(18,4))                       AS basicValue,              -- 动态取值所需（第三层）             bi.BLAST_NAME                                     AS blastName,             b.CHUNBIAO_ID                                     AS procParamId   -- = 各 PROCESSDATA_* 表里的 PARAMID          FROM sub_at_time s                  JOIN T_MD_DIAGNOSE_MODEL_SUBINDEX_INFO si                       ON si.SUBINDEX_ID = s.SUBINDEX_ID                   LEFT JOIN T_MD_DIAGNOSE_MODEL_PARAM_WEIGHT w                            ON w.SUBINDEX_ID = s.SUBINDEX_ID                   LEFT JOIN T_MD_DIAGNOSE_PARAM_SCORE_INFO psi                            ON psi.PARAM_SCORE_ID = w.PARAM_SCORE_ID                   LEFT JOIN T_MD_DIAGNOSE_PARAM_SCORE_DATA psd                            ON psd.PARAM_SCORE_ID = w.PARAM_SCORE_ID                                AND psd.FETCH_TIME = s.GENERATE_TIME                   LEFT JOIN T_MD_DIAGNOSE_PARAM_SCORE_CALCULATE_RULE r                            ON r.PARAM_SCORE_ID = w.PARAM_SCORE_ID                   LEFT JOIN T_MD_DIAGNOSE_BASIC_PARAM_INFO b                            ON LOCATE(b.BASIC_PARAM_ID, r.FORMULA) > 0                   LEFT JOIN T_MD_DIAGNOSE_BLAST_INFO bi                            ON bi.BLAST_ID = b.BLAST_ID          ORDER BY s.markTime ASC, si.INDEX_ID, w.PARAM_SCORE_ID, b.BASIC_PARAM_ID
### Cause: com.ibm.db2.jcc.am.DisconnectNonTransientConnectionException: [jcc][t4][2030][11211][4.34.30] 在对连接的底层 socket、socket input stream 或 socket output stream 执行操作期间
发生通信错误。错误位置：Reply.fill() - insufficient data (-1)。消息：数据不足。 ERRORCODE=-4499, SQLSTATE=08001
; [jcc][t4][2030][11211][4.34.30] 在对连接的底层 socket、socket input stream 或 socket output stream 执行操作期间
发生通信错误。错误位置：Reply.fill() - insufficient data (-1)。消息：数据不足。 ERRORCODE=-4499, SQLSTATE=08001] with root cause

com.ibm.db2.jcc.am.DisconnectNonTransientConnectionException: [jcc][t4][2030][11211][4.34.30] 在对连接的底层 socket、socket input stream 或 socket output stream 执行操作期间
发生通信错误。错误位置：Reply.fill() - insufficient data (-1)。消息：数据不足。 ERRORCODE=-4499, SQLSTATE=08001
	at com.ibm.db2.jcc.am.b5.a(b5.java:338) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.a(a.java:588) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.a(a.java:572) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.a(a.java:567) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.b(x.java:315) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.c(x.java:342) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.c(x.java:455) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.x.v(x.java:1230) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.h(aa.java:165) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.p.g(p.java:93) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.b.readSetGenericSQLSetInfo_(b.java:3394) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.dy.b(dy.java:67) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.d0.b(d0.java:196) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.Agent.readPiggybackCommands(Agent.java:648) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.Agent.beginReadChain(Agent.java:394) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.a.beginReadChain(a.java:871) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.Agent.flow(Agent.java:267) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:4750) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.b(kr.java:4363) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bg(kr.java:3027) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.execute(kr.java:3002) ~[db2jcc-4.34.30.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-6.3.2.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:65) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T01:19:48.674+08:00  INFO 17232 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T01:19:48.697+08:00  INFO 17232 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T01:19:48.700+08:00  INFO 17232 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T01:19:48.701+08:00  INFO 17232 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T01:19:50.081+08:00  INFO 31904 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 31904 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T01:19:50.082+08:00  INFO 31904 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T01:19:50.479+08:00  INFO 31904 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T01:19:50.485+08:00  INFO 31904 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T01:19:50.485+08:00  INFO 31904 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T01:19:50.513+08:00  INFO 31904 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T01:19:50.514+08:00  INFO 31904 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 412 ms
2025-09-13T01:19:50.787+08:00  INFO 31904 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T01:19:50.791+08:00  INFO 31904 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.944 seconds (process running for 1.262)
2025-09-13T01:19:53.909+08:00  INFO 31904 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T01:19:53.910+08:00  INFO 31904 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T01:19:53.910+08:00  INFO 31904 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T01:19:53.952+08:00  INFO 31904 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T01:19:53.961+08:00  INFO 31904 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T01:19:54.772+08:00  INFO 31904 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@486e715a
2025-09-13T01:19:54.773+08:00  INFO 31904 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T01:23:15.422+08:00  INFO 31904 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T01:25:12.631+08:00  INFO 18140 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 18140 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T01:25:12.632+08:00  INFO 18140 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T01:25:13.069+08:00  INFO 18140 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T01:25:13.076+08:00  INFO 18140 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T01:25:13.076+08:00  INFO 18140 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T01:25:13.108+08:00  INFO 18140 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T01:25:13.108+08:00  INFO 18140 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 457 ms
2025-09-13T01:25:13.376+08:00  INFO 18140 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T01:25:13.380+08:00  INFO 18140 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.981 seconds (process running for 1.301)
2025-09-13T01:25:16.526+08:00  INFO 18140 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T01:25:16.526+08:00  INFO 18140 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T01:25:16.526+08:00  INFO 18140 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T01:25:16.568+08:00  INFO 18140 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T01:25:16.571+08:00 ERROR 18140 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.example.score.mapper.ScoreMapper.selectImpactRows] with root cause

org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.example.score.mapper.ScoreMapper.selectImpactRows
	at org.apache.ibatis.binding.MapperMethod$SqlCommand.<init>(MapperMethod.java:229) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.<init>(MapperMethod.java:53) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.lambda$cachedInvoker$0(MapperProxy.java:96) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708) ~[na:na]
	at org.apache.ibatis.util.MapUtil.computeIfAbsent(MapUtil.java:36) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.cachedInvoker(MapperProxy.java:94) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:65) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T01:30:56.546+08:00  INFO 18140 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T01:30:56.571+08:00  INFO 18140 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T01:30:58.028+08:00  INFO 3580 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 3580 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T01:30:58.029+08:00  INFO 3580 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T01:30:58.480+08:00  INFO 3580 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T01:30:58.485+08:00  INFO 3580 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T01:30:58.485+08:00  INFO 3580 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T01:30:58.513+08:00  INFO 3580 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T01:30:58.513+08:00  INFO 3580 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 462 ms
2025-09-13T01:30:58.820+08:00  INFO 3580 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T01:30:58.825+08:00  INFO 3580 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 1.067 seconds (process running for 1.391)
2025-09-13T01:31:13.953+08:00  INFO 3580 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T01:31:13.980+08:00  INFO 3580 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T01:31:15.285+08:00  INFO 12664 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 12664 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T01:31:15.287+08:00  INFO 12664 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T01:31:15.738+08:00  INFO 12664 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T01:31:15.746+08:00  INFO 12664 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T01:31:15.746+08:00  INFO 12664 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T01:31:15.774+08:00  INFO 12664 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T01:31:15.774+08:00  INFO 12664 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 465 ms
2025-09-13T01:31:16.031+08:00  INFO 12664 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T01:31:16.036+08:00  INFO 12664 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 1.013 seconds (process running for 1.328)
2025-09-13T01:31:19.444+08:00  INFO 12664 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T01:31:19.444+08:00  INFO 12664 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T01:31:19.445+08:00  INFO 12664 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T01:31:19.486+08:00  INFO 12664 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T01:31:19.498+08:00 ERROR 12664 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.mybatis.spring.MyBatisSystemException: 
### Error querying database.  Cause: org.apache.ibatis.binding.BindingException: Parameter 'time' not found. Available parameters are [time1, time2, param1, param2]
### Cause: org.apache.ibatis.binding.BindingException: Parameter 'time' not found. Available parameters are [time1, time2, param1, param2]] with root cause

org.apache.ibatis.binding.BindingException: Parameter 'time' not found. Available parameters are [time1, time2, param1, param2]
	at org.apache.ibatis.binding.MapperMethod$ParamMap.get(MapperMethod.java:210) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.reflection.wrapper.MapWrapper.get(MapWrapper.java:46) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.reflection.MetaObject.getValue(MetaObject.java:115) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.createCacheKey(BaseExecutor.java:225) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.createCacheKey(CachingExecutor.java:149) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:89) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:65) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T01:32:05.324+08:00  INFO 12664 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T01:32:05.348+08:00  INFO 12664 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T01:32:06.670+08:00  INFO 16748 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 16748 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T01:32:06.671+08:00  INFO 16748 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T01:32:07.117+08:00  INFO 16748 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T01:32:07.123+08:00  INFO 16748 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T01:32:07.123+08:00  INFO 16748 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T01:32:07.150+08:00  INFO 16748 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T01:32:07.150+08:00  INFO 16748 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 457 ms
2025-09-13T01:32:07.424+08:00  INFO 16748 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T01:32:07.428+08:00  INFO 16748 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 1.013 seconds (process running for 1.345)
2025-09-13T01:32:20.871+08:00  INFO 16748 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T01:32:20.872+08:00  INFO 16748 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T01:32:20.872+08:00  INFO 16748 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T01:32:20.915+08:00  INFO 16748 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T01:32:20.924+08:00 ERROR 16748 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.mybatis.spring.MyBatisSystemException: 
### Error querying database.  Cause: org.apache.ibatis.binding.BindingException: Parameter 'time' not found. Available parameters are [time1, time2, param1, param2]
### Cause: org.apache.ibatis.binding.BindingException: Parameter 'time' not found. Available parameters are [time1, time2, param1, param2]] with root cause

org.apache.ibatis.binding.BindingException: Parameter 'time' not found. Available parameters are [time1, time2, param1, param2]
	at org.apache.ibatis.binding.MapperMethod$ParamMap.get(MapperMethod.java:210) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.reflection.wrapper.MapWrapper.get(MapWrapper.java:46) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.reflection.MetaObject.getValue(MetaObject.java:115) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.createCacheKey(BaseExecutor.java:225) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.createCacheKey(CachingExecutor.java:149) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:89) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:65) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T01:36:25.960+08:00  INFO 16748 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T01:36:26.012+08:00  INFO 16748 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T01:36:27.713+08:00  INFO 2012 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 2012 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T01:36:27.714+08:00  INFO 2012 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T01:36:28.109+08:00  INFO 2012 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T01:36:28.115+08:00  INFO 2012 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T01:36:28.115+08:00  INFO 2012 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T01:36:28.145+08:00  INFO 2012 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T01:36:28.145+08:00  INFO 2012 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 412 ms
2025-09-13T01:36:28.405+08:00  INFO 2012 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T01:36:28.409+08:00  INFO 2012 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.948 seconds (process running for 1.259)
2025-09-13T01:36:30.891+08:00  INFO 2012 --- [score-api] [http-nio-8090-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T01:36:30.891+08:00  INFO 2012 --- [score-api] [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T01:36:30.892+08:00  INFO 2012 --- [score-api] [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T01:36:30.936+08:00  INFO 2012 --- [score-api] [http-nio-8090-exec-3] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T01:36:30.945+08:00  INFO 2012 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T01:36:31.711+08:00  INFO 2012 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@757aacf
2025-09-13T01:36:31.712+08:00  INFO 2012 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T01:37:13.879+08:00  INFO 2012 --- [score-api] [http-nio-8090-exec-7] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T01:37:24.199+08:00  INFO 2012 --- [score-api] [http-nio-8090-exec-2] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T01:37:31.826+08:00  INFO 2012 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T08:52:54.024+08:00  INFO 17468 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 17468 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T08:52:54.026+08:00  INFO 17468 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T08:52:55.207+08:00  INFO 17468 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T08:52:55.220+08:00  INFO 17468 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T08:52:55.221+08:00  INFO 17468 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T08:52:55.289+08:00  INFO 17468 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T08:52:55.291+08:00  INFO 17468 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1213 ms
2025-09-13T08:52:55.954+08:00  INFO 17468 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T08:52:55.967+08:00  INFO 17468 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 2.625 seconds (process running for 3.484)
2025-09-13T08:53:01.875+08:00  INFO 17468 --- [score-api] [http-nio-8090-exec-9] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T08:53:01.876+08:00  INFO 17468 --- [score-api] [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T08:53:01.877+08:00  INFO 17468 --- [score-api] [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T08:53:01.958+08:00  INFO 17468 --- [score-api] [http-nio-8090-exec-9] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T08:53:01.977+08:00  INFO 17468 --- [score-api] [http-nio-8090-exec-9] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T08:53:04.051+08:00  INFO 17468 --- [score-api] [http-nio-8090-exec-9] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@7833dc8f
2025-09-13T08:53:04.054+08:00  INFO 17468 --- [score-api] [http-nio-8090-exec-9] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T09:08:27.848+08:00  INFO 17468 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T09:08:27.956+08:00  INFO 17468 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T09:08:27.961+08:00  INFO 17468 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T09:08:27.966+08:00  INFO 17468 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T09:08:35.594+08:00  INFO 4248 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 4248 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T09:08:35.597+08:00  INFO 4248 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T09:08:36.615+08:00  INFO 4248 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T09:08:36.627+08:00  INFO 4248 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T09:08:36.627+08:00  INFO 4248 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T09:08:36.678+08:00  INFO 4248 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T09:08:36.678+08:00  INFO 4248 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1043 ms
2025-09-13T09:08:37.222+08:00  INFO 4248 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T09:08:37.234+08:00  INFO 4248 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 2.288 seconds (process running for 3.241)
2025-09-13T09:08:44.927+08:00  INFO 4248 --- [score-api] [http-nio-8090-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T09:08:44.928+08:00  INFO 4248 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T09:08:44.929+08:00  INFO 4248 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T09:08:45.002+08:00  INFO 4248 --- [score-api] [http-nio-8090-exec-2] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T09:08:45.019+08:00  INFO 4248 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T09:08:46.295+08:00  INFO 4248 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@6b6d82f3
2025-09-13T09:08:46.297+08:00  INFO 4248 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T09:40:33.906+08:00  INFO 4248 --- [score-api] [http-nio-8090-exec-5] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T09:41:09.409+08:00  INFO 4248 --- [score-api] [http-nio-8090-exec-6] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T09:49:27.372+08:00  INFO 4248 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T09:49:27.448+08:00  INFO 4248 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T09:49:27.455+08:00  INFO 4248 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T09:49:27.461+08:00  INFO 4248 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T09:49:34.369+08:00  INFO 30360 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 30360 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T09:49:34.372+08:00  INFO 30360 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T09:49:35.541+08:00  INFO 30360 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T09:49:35.554+08:00  INFO 30360 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T09:49:35.554+08:00  INFO 30360 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T09:49:35.620+08:00  INFO 30360 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T09:49:35.621+08:00  INFO 30360 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1193 ms
2025-09-13T09:49:36.190+08:00  INFO 30360 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T09:49:36.199+08:00  INFO 30360 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 2.583 seconds (process running for 3.388)
2025-09-13T09:49:41.056+08:00  INFO 30360 --- [score-api] [http-nio-8090-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T09:49:41.056+08:00  INFO 30360 --- [score-api] [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T09:49:41.058+08:00  INFO 30360 --- [score-api] [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T09:49:41.132+08:00  INFO 30360 --- [score-api] [http-nio-8090-exec-3] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T09:49:41.148+08:00  INFO 30360 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T09:49:42.419+08:00  INFO 30360 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@bee5670
2025-09-13T09:49:42.423+08:00  INFO 30360 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T09:49:42.969+08:00 ERROR 30360 --- [score-api] [http-nio-8090-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-206, SQLSTATE=42703, SQLERRMC=SI.SUBINDEX_CODE, DRIVER=4.34.30
### The error may exist in file [F:\Users\lenovo\Desktop\score-api\target\classes\mapper\ScoreMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: WITH raw AS (             SELECT                 d.SUBINDEX_ID,                 d.GENERATE_TIME,                 d.SUBINDEX_VALUE,                 VARCHAR_FORMAT(d.GENERATE_TIME, 'YYYYMMDDHH24MISS') AS markTime14,                 VARCHAR_FORMAT(d.GENERATE_TIME, 'YYYYMMDDHH24MI')   AS minuteKey             FROM T_MD_DIAGNOSE_MODEL_DATA_SUBINDEX d             WHERE (                 d.GENERATE_TIME BETWEEN TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS')                     AND TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS                 ) OR (                 d.GENERATE_TIME BETWEEN TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS')                     AND TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS                 )         ),              j AS (                  SELECT                      r.markTime14,                      r.minuteKey,                      si.SUBINDEX_NAME                                        AS subIndexName,                      COALESCE(si.SUBINDEX_CODE, si.INDEX_ID)                 AS subIndexCode,   -- ★ 子指数编码                      si.WEIGHT                                               AS subIndexWeight,                      r.SUBINDEX_VALUE                                        AS subIndexValue,                      ROW_NUMBER() OVER (         PARTITION BY r.minuteKey, si.SUBINDEX_NAME         ORDER BY r.GENERATE_TIME DESC       ) AS rn                  FROM raw r                           JOIN T_MD_DIAGNOSE_MODEL_SUBINDEX_INFO si                                ON si.SUBINDEX_ID = r.SUBINDEX_ID                  WHERE si.SUBINDEX_NAME IN (                                             '下料稳定性','压量关系稳定性','炉缸工况稳定性','操作炉型稳定性','煤气流分布稳定性'                      )              )         SELECT             markTime14     AS markTime,             subIndexName   AS subIndexName,             subIndexCode   AS subIndexCode,             subIndexWeight AS subIndexWeight,             subIndexValue  AS subIndexValue         FROM j         WHERE rn = 1         ORDER BY markTime14 ASC,                  CASE subIndexName                      WHEN '下料稳定性' THEN 1                      WHEN '压量关系稳定性' THEN 2                      WHEN '炉缸工况稳定性' THEN 3                      WHEN '操作炉型稳定性' THEN 4                      WHEN '煤气流分布稳定性' THEN 5                      ELSE 99                      END;
### Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-206, SQLSTATE=42703, SQLERRMC=SI.SUBINDEX_CODE, DRIVER=4.34.30
; bad SQL grammar []] with root cause

com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-206, SQLSTATE=42703, SQLERRMC=SI.SUBINDEX_CODE, DRIVER=4.34.30
	at com.ibm.db2.jcc.am.b5.a(b5.java:810) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:66) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:140) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.c(kq.java:2890) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.d(kq.java:2874) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.a(kq.java:2278) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:8479) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.i(aa.java:202) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.b(aa.java:92) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.p.a(p.java:32) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.au.i(au.java:150) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.al(kq.java:2247) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bq(kr.java:3909) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:4792) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.b(kr.java:4363) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bg(kr.java:3027) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.execute(kr.java:3002) ~[db2jcc-4.34.30.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-6.3.2.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:65) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T09:53:11.807+08:00  INFO 30360 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T09:53:11.875+08:00  INFO 30360 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T09:53:11.878+08:00  INFO 30360 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T09:53:11.882+08:00  INFO 30360 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T09:53:14.719+08:00  INFO 21668 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 21668 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T09:53:14.723+08:00  INFO 21668 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T09:53:15.687+08:00  INFO 21668 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T09:53:15.698+08:00  INFO 21668 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T09:53:15.699+08:00  INFO 21668 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T09:53:15.781+08:00  INFO 21668 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T09:53:15.782+08:00  INFO 21668 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1009 ms
2025-09-13T09:53:16.434+08:00  INFO 21668 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T09:53:16.443+08:00  INFO 21668 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 2.416 seconds (process running for 3.184)
2025-09-13T09:53:23.197+08:00  INFO 21668 --- [score-api] [http-nio-8090-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T09:53:23.199+08:00  INFO 21668 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T09:53:23.199+08:00  INFO 21668 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T09:53:23.281+08:00  INFO 21668 --- [score-api] [http-nio-8090-exec-2] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T09:53:23.295+08:00  INFO 21668 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T09:53:24.320+08:00  INFO 21668 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@2cbacc38
2025-09-13T09:53:24.322+08:00  INFO 21668 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T09:55:02.508+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@66cc46e8 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T09:55:08.715+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@fda3f6 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T09:55:08.753+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@aecdf30 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T09:55:08.791+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@2645ea31 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T09:55:10.222+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@4b4a0f1c ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T09:55:11.344+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@2cbacc38 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T09:55:15.212+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@5dae9214 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T09:55:17.806+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@31d7d3ce ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T09:55:21.886+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@384aa3a7 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T09:55:22.012+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@2363695d ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T10:04:16.501+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@a747117 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T10:04:16.875+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@680846be ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T10:04:31.615+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@5099f363 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T10:04:43.729+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@683e0a99 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T10:04:53.374+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@4202f3ff ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T10:04:59.049+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@54333910 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T10:05:06.283+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@7fdb5b5e ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T10:05:10.770+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@6a5a1e76 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T10:05:21.354+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@5e3a5fdd ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T10:05:22.723+08:00  WARN 21668 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@3ef684f6 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T10:19:29.218+08:00  INFO 21668 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T10:19:29.368+08:00  INFO 21668 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T10:19:29.377+08:00  INFO 21668 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T10:19:29.382+08:00  INFO 21668 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T14:37:22.306+08:00  INFO 26212 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 26212 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T14:37:22.306+08:00  INFO 26212 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T14:37:23.718+08:00  INFO 26212 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T14:37:23.738+08:00  INFO 26212 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T14:37:23.738+08:00  INFO 26212 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T14:37:23.825+08:00  INFO 26212 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T14:37:23.825+08:00  INFO 26212 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1445 ms
2025-09-13T14:37:24.889+08:00  INFO 26212 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T14:37:24.901+08:00  INFO 26212 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 3.444 seconds (process running for 4.558)
2025-09-13T14:37:36.322+08:00  INFO 26212 --- [score-api] [http-nio-8090-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T14:37:36.327+08:00  INFO 26212 --- [score-api] [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T14:37:36.327+08:00  INFO 26212 --- [score-api] [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T14:37:36.470+08:00  INFO 26212 --- [score-api] [http-nio-8090-exec-3] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T14:37:36.508+08:00  INFO 26212 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T14:37:38.972+08:00  INFO 26212 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@37e6b971
2025-09-13T14:37:38.972+08:00  INFO 26212 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T14:37:39.806+08:00 ERROR 26212 --- [score-api] [http-nio-8090-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-104, SQLSTATE=42601, SQLERRMC=UNION;MMDDHH24MISS') AS t
;<table_expr>, DRIVER=4.34.30
### The error may exist in file [F:\Users\lenovo\Desktop\score-api\target\classes\mapper\ScoreMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: WITH times AS (             SELECT TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') AS t             UNION ALL             SELECT TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') AS t         ),              top_index AS (                  SELECT                      VARCHAR_FORMAT(i.GENERATE_TIME, 'YYYYMMDDHH24MISS') AS markTime,                      i.GENERATE_TIME                                    AS gt,                      i.INDEX_VALUE                                      AS topIndexValue                  FROM T_MD_DIAGNOSE_MODEL_DATA_INDEX i                           JOIN times ON i.GENERATE_TIME = times.t                  WHERE i.INDEX_ID = 'B4TEN_I'              ),              sub_data AS (                  SELECT                      VARCHAR_FORMAT(d.GENERATE_TIME, 'YYYYMMDDHH24MISS') AS markTime,                      d.GENERATE_TIME                                    AS gt,                      d.SUBINDEX_ID,                      d.SUBINDEX_VALUE                  FROM T_MD_DIAGNOSE_MODEL_DATA_SUBINDEX d                           JOIN times ON d.GENERATE_TIME = times.t              )         SELECT             ti.markTime                                           AS markTime,             ti.topIndexValue                                      AS topIndexValue,              si.SUBINDEX_NAME                                      AS subIndexName,             /* 子指数对外 code：若你库里约定对外编码在 si.INDEX_ID，则用 INDEX_ID；若要求用 SUBINDEX_ID，则替换这里 */             si.INDEX_ID                                           AS subIndexCode,             si.WEIGHT                                             AS subIndexWeight,             sd.SUBINDEX_VALUE                                     AS subIndexValue          FROM top_index ti                  LEFT JOIN sub_data sd                            ON sd.gt = ti.gt                  LEFT JOIN T_MD_DIAGNOSE_MODEL_SUBINDEX_INFO si                            ON si.SUBINDEX_ID = sd.SUBINDEX_ID          /* 过滤 B4TEN_I 的五个子指数 —— 方式 A：按名称白名单 */         WHERE si.SUBINDEX_NAME IN (                                    '下料稳定性','压量关系稳定性','炉缸工况稳定性','操作炉型稳定性','煤气流分布稳定性'             )          /* 过滤方式 B：如需按 code 前缀，请改用下行，并去掉上面的名称白名单            WHERE si.INDEX_ID LIKE 'B4TEN_I\_%' ESCAPE '\'         */          ORDER BY ti.markTime ASC,                  CASE si.SUBINDEX_NAME                      WHEN '下料稳定性' THEN 1                      WHEN '压量关系稳定性' THEN 2                      WHEN '炉缸工况稳定性' THEN 3                      WHEN '操作炉型稳定性' THEN 4                      WHEN '煤气流分布稳定性' THEN 5                      ELSE 99                      END;
### Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-104, SQLSTATE=42601, SQLERRMC=UNION;MMDDHH24MISS') AS t
;<table_expr>, DRIVER=4.34.30
; bad SQL grammar []] with root cause

com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-104, SQLSTATE=42601, SQLERRMC=UNION;MMDDHH24MISS') AS t
;<table_expr>, DRIVER=4.34.30
	at com.ibm.db2.jcc.am.b5.a(b5.java:810) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:66) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:140) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.c(kq.java:2890) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.d(kq.java:2874) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.a(kq.java:2278) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:8479) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.i(aa.java:202) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.b(aa.java:92) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.p.a(p.java:32) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.au.i(au.java:150) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.al(kq.java:2247) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bq(kr.java:3909) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:4792) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.b(kr.java:4363) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bg(kr.java:3027) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.execute(kr.java:3002) ~[db2jcc-4.34.30.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-6.3.2.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T14:39:22.939+08:00  INFO 26212 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T14:39:22.987+08:00  INFO 26212 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T14:39:22.991+08:00  INFO 26212 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T14:39:22.996+08:00  INFO 26212 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T14:39:25.822+08:00  INFO 8712 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 8712 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T14:39:25.824+08:00  INFO 8712 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T14:39:26.850+08:00  INFO 8712 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T14:39:26.864+08:00  INFO 8712 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T14:39:26.865+08:00  INFO 8712 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T14:39:26.920+08:00  INFO 8712 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T14:39:26.921+08:00  INFO 8712 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1049 ms
2025-09-13T14:39:27.511+08:00  INFO 8712 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T14:39:27.519+08:00  INFO 8712 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 2.284 seconds (process running for 3.072)
2025-09-13T14:39:33.971+08:00  INFO 8712 --- [score-api] [http-nio-8090-exec-7] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T14:39:33.971+08:00  INFO 8712 --- [score-api] [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T14:39:33.972+08:00  INFO 8712 --- [score-api] [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T14:39:34.057+08:00  INFO 8712 --- [score-api] [http-nio-8090-exec-7] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T14:39:34.075+08:00  INFO 8712 --- [score-api] [http-nio-8090-exec-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T14:39:35.317+08:00  INFO 8712 --- [score-api] [http-nio-8090-exec-7] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@6799891c
2025-09-13T14:39:35.320+08:00  INFO 8712 --- [score-api] [http-nio-8090-exec-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T14:44:05.318+08:00  INFO 8712 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T14:44:05.404+08:00  INFO 8712 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T14:44:05.410+08:00  INFO 8712 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T14:44:05.414+08:00  INFO 8712 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T14:44:08.170+08:00  INFO 10952 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 10952 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T14:44:08.172+08:00  INFO 10952 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T14:44:09.191+08:00  INFO 10952 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T14:44:09.201+08:00  INFO 10952 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T14:44:09.202+08:00  INFO 10952 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T14:44:09.255+08:00  INFO 10952 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T14:44:09.255+08:00  INFO 10952 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1033 ms
2025-09-13T14:44:09.871+08:00  INFO 10952 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T14:44:09.881+08:00  INFO 10952 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 2.331 seconds (process running for 3.063)
2025-09-13T14:44:13.997+08:00  INFO 10952 --- [score-api] [http-nio-8090-exec-4] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T14:44:13.998+08:00  INFO 10952 --- [score-api] [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T14:44:13.998+08:00  INFO 10952 --- [score-api] [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T14:44:14.079+08:00  INFO 10952 --- [score-api] [http-nio-8090-exec-4] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T14:44:14.096+08:00  INFO 10952 --- [score-api] [http-nio-8090-exec-4] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T14:44:15.870+08:00  INFO 10952 --- [score-api] [http-nio-8090-exec-4] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@46e35613
2025-09-13T14:44:15.872+08:00  INFO 10952 --- [score-api] [http-nio-8090-exec-4] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T14:50:27.713+08:00  INFO 10952 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T14:50:27.769+08:00  INFO 10952 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T14:50:27.775+08:00  INFO 10952 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T14:50:27.779+08:00  INFO 10952 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T14:50:30.548+08:00  INFO 26444 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 26444 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T14:50:30.551+08:00  INFO 26444 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T14:50:31.521+08:00  INFO 26444 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T14:50:31.533+08:00  INFO 26444 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T14:50:31.533+08:00  INFO 26444 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T14:50:31.581+08:00  INFO 26444 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T14:50:31.581+08:00  INFO 26444 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 982 ms
2025-09-13T14:50:32.113+08:00  INFO 26444 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T14:50:32.119+08:00  INFO 26444 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 2.26 seconds (process running for 3.034)
2025-09-13T14:50:39.950+08:00  INFO 26444 --- [score-api] [http-nio-8090-exec-4] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T14:50:39.950+08:00  INFO 26444 --- [score-api] [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T14:50:39.951+08:00  INFO 26444 --- [score-api] [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T14:50:40.036+08:00  INFO 26444 --- [score-api] [http-nio-8090-exec-4] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T14:50:40.053+08:00  INFO 26444 --- [score-api] [http-nio-8090-exec-4] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T14:50:42.217+08:00  INFO 26444 --- [score-api] [http-nio-8090-exec-4] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@64a6efba
2025-09-13T14:50:42.222+08:00  INFO 26444 --- [score-api] [http-nio-8090-exec-4] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T14:50:42.873+08:00 ERROR 26444 --- [score-api] [http-nio-8090-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-203, SQLSTATE=42702, SQLERRMC=W, DRIVER=4.34.30
### The error may exist in file [F:\Users\lenovo\Desktop\score-api\target\classes\mapper\ScoreMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: WITH win(w, t_start, t_end, t_in14) AS (         VALUES         (1,         TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS'),         TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS,         ?),         (2,         TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS'),         TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS,         ?)         ),          /* 顶层：B4TEN_I 在各时间窗内优先取“等于入参秒”的记录，否则取该窗内最新一条 */         top_src AS (         SELECT         w.w,         i.GENERATE_TIME                                    AS gt,         VARCHAR_FORMAT(i.GENERATE_TIME,'YYYYMMDDHH24MISS') AS markTime,         i.INDEX_VALUE                                      AS val,         CASE WHEN i.GENERATE_TIME = w.t_start THEN 0 ELSE 1 END AS pref         FROM win w         JOIN T_MD_DIAGNOSE_MODEL_DATA_INDEX i         ON i.INDEX_ID = 'B4TEN_I'         AND i.GENERATE_TIME BETWEEN w.t_start AND w.t_end         ),         top_pick AS (         SELECT         w,         /* 如果没命中顶层，用入参时间填充 markTime，保证每窗都有一条 */         COALESCE(markTime, t_in14) AS markTime,         gt,         topIndexValue         FROM (         SELECT         w,         markTime,         gt,         val AS topIndexValue,         ROW_NUMBER() OVER (PARTITION BY w ORDER BY pref ASC, gt DESC) rn         FROM top_src         ) t         RIGHT JOIN win ON win.w = t.w         WHERE (t.rn = 1 OR t.rn IS NULL)         ),          /* 子指数：各时间窗内对每个 SUBINDEX_ID 取“等于入参秒优先，否则窗内最新” */         sub_src AS (         SELECT         w.w,         d.GENERATE_TIME                                    AS gt,         VARCHAR_FORMAT(d.GENERATE_TIME,'YYYYMMDDHH24MISS') AS markTime,         d.SUBINDEX_ID,         d.SUBINDEX_VALUE,         CASE WHEN d.GENERATE_TIME = w.t_start THEN 0 ELSE 1 END AS pref         FROM win w         JOIN T_MD_DIAGNOSE_MODEL_DATA_SUBINDEX d         ON d.GENERATE_TIME BETWEEN w.t_start AND w.t_end         /* 若该表时间列为 FETCH_TIME，请改为：         d.FETCH_TIME BETWEEN w.t_start AND w.t_end         ，并把上面两处 GENERATE_TIME 改为 FETCH_TIME         */         ),         sub_pick AS (         SELECT w, markTime, gt, SUBINDEX_ID, SUBINDEX_VALUE         FROM (         SELECT         w, markTime, gt, SUBINDEX_ID, SUBINDEX_VALUE,         ROW_NUMBER() OVER (         PARTITION BY w, SUBINDEX_ID         ORDER BY pref ASC, gt DESC         ) rn         FROM sub_src         ) s         WHERE rn = 1         )          SELECT         tp.markTime                      AS markTime,         tp.topIndexValue                 AS topIndexValue,          si.SUBINDEX_NAME                 AS subIndexName,         /* 子指数 code：如需改用 SUBINDEX_ID，请把下行替换为 si.SUBINDEX_ID */         si.INDEX_ID                      AS subIndexCode,         si.WEIGHT                        AS subIndexWeight,         sp.SUBINDEX_VALUE                AS subIndexValue          FROM top_pick tp         /* 同一时间窗聚合子指数 */         LEFT JOIN sub_pick sp         ON sp.w = tp.w         LEFT JOIN T_MD_DIAGNOSE_MODEL_SUBINDEX_INFO si         ON si.SUBINDEX_ID = sp.SUBINDEX_ID         AND si.SUBINDEX_NAME IN ('下料稳定性','压量关系稳定性','炉缸工况稳定性','操作炉型稳定性','煤气流分布稳定性')          ORDER BY tp.markTime ASC,         CASE si.SUBINDEX_NAME         WHEN '下料稳定性' THEN 1         WHEN '压量关系稳定性' THEN 2         WHEN '炉缸工况稳定性' THEN 3         WHEN '操作炉型稳定性' THEN 4         WHEN '煤气流分布稳定性' THEN 5         ELSE 99         END;
### Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-203, SQLSTATE=42702, SQLERRMC=W, DRIVER=4.34.30
; bad SQL grammar []] with root cause

com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-203, SQLSTATE=42702, SQLERRMC=W, DRIVER=4.34.30
	at com.ibm.db2.jcc.am.b5.a(b5.java:810) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:66) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:140) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.c(kq.java:2890) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.d(kq.java:2874) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.a(kq.java:2278) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:8479) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.i(aa.java:202) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.b(aa.java:92) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.p.a(p.java:32) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.au.i(au.java:150) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.al(kq.java:2247) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bq(kr.java:3909) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:4792) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.b(kr.java:4363) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bg(kr.java:3027) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.execute(kr.java:3002) ~[db2jcc-4.34.30.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-6.3.2.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T14:52:27.209+08:00  INFO 26444 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T14:52:27.274+08:00  INFO 26444 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T14:52:27.279+08:00  INFO 26444 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T14:52:28.514+08:00  INFO 26444 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T14:52:31.412+08:00  INFO 13816 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 13816 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T14:52:31.415+08:00  INFO 13816 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T14:52:32.438+08:00  INFO 13816 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T14:52:32.450+08:00  INFO 13816 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T14:52:32.450+08:00  INFO 13816 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T14:52:32.520+08:00  INFO 13816 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T14:52:32.520+08:00  INFO 13816 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1059 ms
2025-09-13T14:52:33.145+08:00  INFO 13816 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T14:52:33.154+08:00  INFO 13816 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 2.394 seconds (process running for 3.162)
2025-09-13T14:52:35.863+08:00  INFO 13816 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T14:52:35.864+08:00  INFO 13816 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T14:52:35.865+08:00  INFO 13816 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T14:52:35.946+08:00  INFO 13816 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T14:52:35.961+08:00  INFO 13816 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T14:52:37.319+08:00  INFO 13816 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@7a5f0ac5
2025-09-13T14:52:37.322+08:00  INFO 13816 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T15:00:12.588+08:00  INFO 13816 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T15:00:12.661+08:00  INFO 13816 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T15:00:12.671+08:00  INFO 13816 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T15:00:12.677+08:00  INFO 13816 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T15:00:15.630+08:00  INFO 20424 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 20424 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T15:00:15.633+08:00  INFO 20424 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T15:00:16.658+08:00  INFO 20424 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T15:00:16.671+08:00  INFO 20424 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T15:00:16.671+08:00  INFO 20424 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T15:00:16.725+08:00  INFO 20424 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T15:00:16.725+08:00  INFO 20424 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1041 ms
2025-09-13T15:00:17.318+08:00  INFO 20424 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T15:00:17.329+08:00  INFO 20424 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 2.321 seconds (process running for 3.239)
2025-09-13T15:00:25.408+08:00  INFO 20424 --- [score-api] [http-nio-8090-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T15:00:25.408+08:00  INFO 20424 --- [score-api] [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T15:00:25.409+08:00  INFO 20424 --- [score-api] [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T15:00:25.489+08:00  INFO 20424 --- [score-api] [http-nio-8090-exec-3] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T15:00:25.506+08:00  INFO 20424 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T15:00:26.615+08:00  INFO 20424 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@701767c3
2025-09-13T15:00:26.619+08:00  INFO 20424 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T15:00:27.013+08:00 ERROR 20424 --- [score-api] [http-nio-8090-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-204, SQLSTATE=42704, SQLERRMC=BLAST_DEV_TO_CLOUD.T_MD_DIAGNOSE_MODEL_DATA_INDEX_BAK, DRIVER=4.34.30
### The error may exist in file [F:\Users\lenovo\Desktop\score-api\target\classes\mapper\ScoreMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: WITH win(win_id, t_start, t_end, t_in14) AS (         VALUES         (1,         TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS'),         TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS,         ?),         (2,         TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS'),         TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS,         ?)         ),          /* 顶层(时间)：先在主表取每个时间窗优先=入参秒，否则窗内最新的一条 -> markTime/gt */         top_time_src AS (         SELECT         win.win_id                                        AS w,         i.GENERATE_TIME                                    AS gt,         VARCHAR_FORMAT(i.GENERATE_TIME,'YYYYMMDDHH24MISS') AS markTime,         CASE WHEN i.GENERATE_TIME = win.t_start THEN 0 ELSE 1 END AS pref         FROM win         JOIN T_MD_DIAGNOSE_MODEL_DATA_INDEX i         ON i.INDEX_ID = 'B4TEN_I'         AND i.GENERATE_TIME BETWEEN win.t_start AND win.t_end         ),         top_time_pick AS (         SELECT         win.win_id                                         AS w,         /* 若该窗主表完全没命中，用入参时间占位，保证每窗都有一条 */         COALESCE(t.markTime, win.t_in14)                   AS markTime,         t.gt                                               AS gt         FROM (         SELECT         w, markTime, gt,         ROW_NUMBER() OVER (PARTITION BY w ORDER BY pref ASC, gt DESC) rn         FROM top_time_src         ) t         RIGHT JOIN win ON win.win_id = t.w         WHERE (t.rn = 1 OR t.rn IS NULL)         ),          /* 顶层(value)：在 bak 表中取 B4TEN_I         - 优先取 GENERATE_TIME = 主表选出的 gt         - 否则退到该时间窗内最新一条         */         top_val_pick AS (         SELECT         tp.w,         v.topIndexValue         FROM top_time_pick tp         JOIN win ON win.win_id = tp.w         LEFT JOIN LATERAL (         SELECT         b.INDEX_VALUE AS topIndexValue,         ROW_NUMBER() OVER (         ORDER BY         CASE WHEN b.GENERATE_TIME = tp.gt THEN 0 ELSE 1 END ASC,  -- 精确匹配主表时间优先         b.GENERATE_TIME DESC         ) rn         FROM T_MD_DIAGNOSE_MODEL_DATA_INDEX_bak b         WHERE b.INDEX_ID = 'B4TEN_I'         AND b.GENERATE_TIME BETWEEN win.t_start AND win.t_end         ) v ON 1=1         WHERE v.rn = 1 OR v.rn IS NULL         ),          /* 子指数：各时间窗内对每个 SUBINDEX_ID 取“等于入参秒优先，否则窗内最新” */         sub_src AS (         SELECT         win.win_id                                         AS w,         d.GENERATE_TIME                                    AS gt,         VARCHAR_FORMAT(d.GENERATE_TIME,'YYYYMMDDHH24MISS') AS markTime,         d.SUBINDEX_ID,         d.SUBINDEX_VALUE,         CASE WHEN d.GENERATE_TIME = win.t_start THEN 0 ELSE 1 END AS pref         FROM win         JOIN T_MD_DIAGNOSE_MODEL_DATA_SUBINDEX d         ON d.GENERATE_TIME BETWEEN win.t_start AND win.t_end         /* 若该表时间列为 FETCH_TIME，请改为：         d.FETCH_TIME BETWEEN win.t_start AND win.t_end         并把上面的 GENERATE_TIME 三处改为 FETCH_TIME         */         ),         sub_pick AS (         SELECT w, markTime, gt, SUBINDEX_ID, SUBINDEX_VALUE         FROM (         SELECT         w, markTime, gt, SUBINDEX_ID, SUBINDEX_VALUE,         ROW_NUMBER() OVER (         PARTITION BY w, SUBINDEX_ID         ORDER BY pref ASC, gt DESC         ) rn         FROM sub_src         ) s         WHERE rn = 1         )          SELECT         tp.markTime                      AS markTime,       -- 顶层 markTime：主表         tv.topIndexValue                 AS topIndexValue,  -- 顶层 value：bak 表          si.SUBINDEX_NAME                 AS subIndexName,         /* 子指数 code：如需用 SUBINDEX_ID，请把下行替换为 si.SUBINDEX_ID */         si.INDEX_ID                      AS subIndexCode,         si.WEIGHT                        AS subIndexWeight,         sp.SUBINDEX_VALUE                AS subIndexValue          FROM top_time_pick tp         LEFT JOIN top_val_pick tv         ON tv.w = tp.w         LEFT JOIN sub_pick sp         ON sp.w = tp.w         LEFT JOIN T_MD_DIAGNOSE_MODEL_SUBINDEX_INFO si         ON si.SUBINDEX_ID = sp.SUBINDEX_ID         AND si.SUBINDEX_NAME IN ('下料稳定性','压量关系稳定性','炉缸工况稳定性','操作炉型稳定性','煤气流分布稳定性')          ORDER BY tp.markTime ASC,         CASE si.SUBINDEX_NAME         WHEN '下料稳定性' THEN 1         WHEN '压量关系稳定性' THEN 2         WHEN '炉缸工况稳定性' THEN 3         WHEN '操作炉型稳定性' THEN 4         WHEN '煤气流分布稳定性' THEN 5         ELSE 99         END;
### Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-204, SQLSTATE=42704, SQLERRMC=BLAST_DEV_TO_CLOUD.T_MD_DIAGNOSE_MODEL_DATA_INDEX_BAK, DRIVER=4.34.30
; bad SQL grammar []] with root cause

com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-204, SQLSTATE=42704, SQLERRMC=BLAST_DEV_TO_CLOUD.T_MD_DIAGNOSE_MODEL_DATA_INDEX_BAK, DRIVER=4.34.30
	at com.ibm.db2.jcc.am.b5.a(b5.java:810) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:66) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:140) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.c(kq.java:2890) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.d(kq.java:2874) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.a(kq.java:2278) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:8479) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.i(aa.java:202) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.b(aa.java:92) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.p.a(p.java:32) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.au.i(au.java:150) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.al(kq.java:2247) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bq(kr.java:3909) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:4792) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.b(kr.java:4363) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bg(kr.java:3027) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.execute(kr.java:3002) ~[db2jcc-4.34.30.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-6.3.2.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T15:02:42.400+08:00  INFO 20424 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T15:02:42.464+08:00  INFO 20424 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T15:02:42.468+08:00  INFO 20424 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T15:02:42.471+08:00  INFO 20424 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T15:02:45.375+08:00  INFO 31928 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 31928 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T15:02:45.378+08:00  INFO 31928 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T15:02:46.359+08:00  INFO 31928 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T15:02:46.369+08:00  INFO 31928 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T15:02:46.370+08:00  INFO 31928 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T15:02:46.434+08:00  INFO 31928 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T15:02:46.434+08:00  INFO 31928 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1006 ms
2025-09-13T15:02:47.086+08:00  INFO 31928 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T15:02:47.096+08:00  INFO 31928 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 2.405 seconds (process running for 3.272)
2025-09-13T15:02:50.095+08:00  INFO 31928 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T15:02:50.096+08:00  INFO 31928 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T15:02:50.097+08:00  INFO 31928 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T15:02:50.175+08:00  INFO 31928 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T15:02:50.193+08:00  INFO 31928 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T15:02:51.818+08:00  INFO 31928 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@25ced8df
2025-09-13T15:02:51.821+08:00  INFO 31928 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T15:56:44.440+08:00  INFO 31928 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T15:56:44.510+08:00  INFO 31928 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T15:56:44.519+08:00  INFO 31928 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T15:56:44.531+08:00  INFO 31928 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T15:56:47.615+08:00  INFO 4732 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 4732 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T15:56:47.615+08:00  INFO 4732 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T15:56:48.722+08:00  INFO 4732 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T15:56:48.734+08:00  INFO 4732 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T15:56:48.734+08:00  INFO 4732 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T15:56:48.780+08:00  INFO 4732 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T15:56:48.780+08:00  INFO 4732 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1104 ms
2025-09-13T15:56:49.318+08:00  INFO 4732 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T15:56:49.332+08:00  INFO 4732 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 2.402 seconds (process running for 3.412)
2025-09-13T15:56:55.857+08:00  INFO 4732 --- [score-api] [http-nio-8090-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T15:56:55.857+08:00  INFO 4732 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T15:56:55.857+08:00  INFO 4732 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T15:56:55.963+08:00  INFO 4732 --- [score-api] [http-nio-8090-exec-2] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T15:56:55.979+08:00  INFO 4732 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T15:56:57.274+08:00  INFO 4732 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@72b2817
2025-09-13T15:56:57.288+08:00  INFO 4732 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T15:56:58.227+08:00 ERROR 4732 --- [score-api] [http-nio-8090-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped expression, DRIVER=4.34.30
### The error may exist in file [F:\Users\lenovo\Desktop\score-api\target\classes\mapper\ScoreMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: -- 两段时间窗：[time, time+59s]；用 win_id 避免歧义         WITH win(win_id, t_start, t_end, t_in14) AS (             VALUES                 (1,                  TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS'),                  TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS,                  ?),                 (2,                  TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS'),                  TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS,                  ?)         ),               -- 顶层(总指数)：MODEL_DATA_INDEX，挑每个时间窗一条（优先等于入参秒，其次窗内最新）              top_src AS (                  SELECT                      w.win_id AS w,                      i.GENERATE_TIME                                    AS gt,                      VARCHAR_FORMAT(i.GENERATE_TIME,'YYYYMMDDHH24MISS') AS markTime,                      i.INDEX_VALUE                                      AS topIndexValue,                      CASE WHEN i.GENERATE_TIME = w.t_start THEN 0 ELSE 1 END AS pref                  FROM win w                           JOIN T_MD_DIAGNOSE_MODEL_DATA_INDEX i                                ON i.INDEX_ID = 'B4TEN_I'                                    AND i.GENERATE_TIME BETWEEN w.t_start AND w.t_end              ),              top_pick AS (                  SELECT w, markTime, gt, topIndexValue                  FROM (                           SELECT w, markTime, gt, topIndexValue,                                  ROW_NUMBER() OVER (PARTITION BY w ORDER BY pref ASC, gt DESC) rn                           FROM top_src                       ) t                  WHERE rn = 1              ),               -- 子指数定义：从 SUBINDEX_INFO 取出 B4TEN_I 对应的子指数清单（用于固定顺序与占位）              sub_def AS (                  SELECT                      si.SUBINDEX_ID,                      si.SUBINDEX_NAME,                      si.INDEX_ID,        -- 作为对子返回的 code                      si.WEIGHT,                      CASE si.SUBINDEX_NAME                          WHEN '下料稳定性'     THEN 1                          WHEN '压量关系稳定性' THEN 2                          WHEN '炉缸工况稳定性' THEN 3                          WHEN '操作炉型稳定性' THEN 4                          WHEN '煤气流分布稳定性' THEN 5                          ELSE 99                          END AS ord                  FROM T_MD_DIAGNOSE_MODEL_SUBINDEX_INFO si                  WHERE si.INDEX_ID = 'B4TEN_I'                    AND si.SUBINDEX_NAME IN ('下料稳定性','压量关系稳定性','炉缸工况稳定性','操作炉型稳定性','煤气流分布稳定性')              ),               -- 子指数取值：在 DATA_SUBINDEX 中按相同秒与 SUBINDEX_ID 匹配；同秒多条取最新              sub_match AS (                  SELECT                      tp.w,                      tp.markTime,                      sd.SUBINDEX_ID,                      sd.SUBINDEX_NAME,                      sd.INDEX_ID      AS subIndexCode,   -- 按你的要求：子指数 code=INDEX_ID                      sd.WEIGHT,                      d.SUBINDEX_VALUE,                      ROW_NUMBER() OVER (               PARTITION BY tp.w, sd.SUBINDEX_ID               ORDER BY d.GENERATE_TIME DESC             ) rn                  FROM top_pick tp                           CROSS JOIN sub_def sd                           LEFT JOIN T_MD_DIAGNOSE_MODEL_DATA_SUBINDEX d                                     ON d.SUBINDEX_ID = sd.SUBINDEX_ID                                         AND VARCHAR_FORMAT(d.GENERATE_TIME,'YYYYMMDDHH24MISS') = tp.markTime              )          SELECT             tp.markTime                      AS markTime,        -- 顶层 markTime（来自 MODEL_DATA_INDEX）             tp.topIndexValue                 AS topIndexValue,   -- 顶层 value = INDEX_VALUE              sm.SUBINDEX_NAME                 AS subIndexName,    -- 子指数 name             sm.subIndexCode                  AS subIndexCode,    -- 子指数 code = SUBINDEX_INFO.INDEX_ID             sm.WEIGHT                        AS subIndexWeight,  -- 子指数 weight             sm.SUBINDEX_VALUE                AS subIndexValue    -- 子指数 value = DATA_SUBINDEX.SUBINDEX_VALUE          FROM top_pick tp                  LEFT JOIN (SELECT * FROM sub_match WHERE rn = 1) sm                            ON sm.w = tp.w         ORDER BY tp.markTime ASC,                  CASE sm.SUBINDEX_NAME                      WHEN '下料稳定性'     THEN 1                      WHEN '压量关系稳定性' THEN 2                      WHEN '炉缸工况稳定性' THEN 3                      WHEN '操作炉型稳定性' THEN 4                      WHEN '煤气流分布稳定性' THEN 5                      ELSE 99                      END;
### Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped expression, DRIVER=4.34.30
; bad SQL grammar []] with root cause

com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped expression, DRIVER=4.34.30
	at com.ibm.db2.jcc.am.b5.a(b5.java:810) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:66) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:140) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.c(kq.java:2890) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.d(kq.java:2874) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.a(kq.java:2278) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:8479) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.i(aa.java:202) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.b(aa.java:92) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.p.a(p.java:32) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.au.i(au.java:150) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.al(kq.java:2247) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bq(kr.java:3909) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:4792) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.b(kr.java:4363) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bg(kr.java:3027) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.execute(kr.java:3002) ~[db2jcc-4.34.30.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-6.3.2.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T15:57:54.584+08:00  INFO 4732 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T15:57:54.673+08:00  INFO 4732 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T15:57:54.675+08:00  INFO 4732 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T15:57:54.686+08:00  INFO 4732 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T15:57:57.878+08:00  INFO 21808 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 21808 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T15:57:57.883+08:00  INFO 21808 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T15:57:58.920+08:00  INFO 21808 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T15:57:58.934+08:00  INFO 21808 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T15:57:58.934+08:00  INFO 21808 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T15:57:59.002+08:00  INFO 21808 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T15:57:59.004+08:00  INFO 21808 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1067 ms
2025-09-13T15:57:59.796+08:00  INFO 21808 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T15:57:59.808+08:00  INFO 21808 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 2.557 seconds (process running for 3.393)
2025-09-13T15:58:01.367+08:00  INFO 21808 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T15:58:01.367+08:00  INFO 21808 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T15:58:01.367+08:00  INFO 21808 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T15:58:01.449+08:00  INFO 21808 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T15:58:01.471+08:00  INFO 21808 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T15:58:02.806+08:00  INFO 21808 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@7a5f0ac5
2025-09-13T15:58:02.808+08:00  INFO 21808 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T15:58:03.510+08:00 ERROR 21808 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped expression, DRIVER=4.34.30
### The error may exist in file [F:\Users\lenovo\Desktop\score-api\target\classes\mapper\ScoreMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: -- 两段时间窗：[time, time+59s]；用 win_id 避免歧义         WITH win(win_id, t_start, t_end, t_in14) AS (             VALUES                 (1,                  TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS'),                  TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS,                  ?),                 (2,                  TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS'),                  TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS,                  ?)         ),               -- 顶层(总指数)：MODEL_DATA_INDEX，挑每个时间窗一条（优先等于入参秒，其次窗内最新）              top_src AS (                  SELECT                      w.win_id AS w,                      i.GENERATE_TIME                                    AS gt,                      VARCHAR_FORMAT(i.GENERATE_TIME,'YYYYMMDDHH24MISS') AS markTime,                      i.INDEX_VALUE                                      AS topIndexValue,                      CASE WHEN i.GENERATE_TIME = w.t_start THEN 0 ELSE 1 END AS pref                  FROM win w                           JOIN T_MD_DIAGNOSE_MODEL_DATA_INDEX i                                ON i.INDEX_ID = 'B4TEN_I'                                    AND i.GENERATE_TIME BETWEEN w.t_start AND w.t_end              ),              top_pick AS (                  SELECT w, markTime, gt, topIndexValue                  FROM (                           SELECT w, markTime, gt, topIndexValue,                                  ROW_NUMBER() OVER (PARTITION BY w ORDER BY pref ASC, gt DESC) rn                           FROM top_src                       ) t                  WHERE rn = 1              ),               -- 子指数定义：从 SUBINDEX_INFO 取出 B4TEN_I 对应的子指数清单（用于固定顺序与占位）              sub_def AS (                  SELECT                      si.SUBINDEX_ID,                      si.SUBINDEX_NAME,                      si.INDEX_ID,        -- 作为对子返回的 code                      si.WEIGHT,                      CASE si.SUBINDEX_NAME                          WHEN '下料稳定性'     THEN 1                          WHEN '压量关系稳定性' THEN 2                          WHEN '炉缸工况稳定性' THEN 3                          WHEN '操作炉型稳定性' THEN 4                          WHEN '煤气流分布稳定性' THEN 5                          ELSE 99                          END AS ord                  FROM T_MD_DIAGNOSE_MODEL_SUBINDEX_INFO si                  WHERE si.INDEX_ID = 'B4TEN_I'                    AND si.SUBINDEX_NAME IN ('下料稳定性','压量关系稳定性','炉缸工况稳定性','操作炉型稳定性','煤气流分布稳定性')              ),               -- 子指数取值：在 DATA_SUBINDEX 中按相同秒与 SUBINDEX_ID 匹配；同秒多条取最新              sub_match AS (                  SELECT                      tp.w,                      tp.markTime,                      sd.SUBINDEX_ID,                      sd.SUBINDEX_NAME,                      sd.INDEX_ID      AS subIndexCode,   -- 按你的要求：子指数 code=INDEX_ID                      sd.WEIGHT,                      d.SUBINDEX_VALUE,                      ROW_NUMBER() OVER (               PARTITION BY tp.w, sd.SUBINDEX_ID               ORDER BY d.GENERATE_TIME DESC             ) rn                  FROM top_pick tp                           CROSS JOIN sub_def sd                           LEFT JOIN T_MD_DIAGNOSE_MODEL_DATA_SUBINDEX d                                     ON d.SUBINDEX_ID = sd.SUBINDEX_ID                                         AND VARCHAR_FORMAT(d.GENERATE_TIME,'YYYYMMDDHH24MISS') = tp.markTime              )          SELECT             tp.markTime                      AS markTime,        -- 顶层 markTime（来自 MODEL_DATA_INDEX）             tp.topIndexValue                 AS topIndexValue,   -- 顶层 value = INDEX_VALUE              sm.SUBINDEX_NAME                 AS subIndexName,    -- 子指数 name             sm.subIndexCode                  AS subIndexCode,    -- 子指数 code = SUBINDEX_INFO.INDEX_ID             sm.WEIGHT                        AS subIndexWeight,  -- 子指数 weight             sm.SUBINDEX_VALUE                AS subIndexValue    -- 子指数 value = DATA_SUBINDEX.SUBINDEX_VALUE          FROM top_pick tp                  LEFT JOIN (SELECT * FROM sub_match WHERE rn = 1) sm                            ON sm.w = tp.w         ORDER BY tp.markTime ASC,                  CASE sm.SUBINDEX_NAME                      WHEN '下料稳定性'     THEN 1                      WHEN '压量关系稳定性' THEN 2                      WHEN '炉缸工况稳定性' THEN 3                      WHEN '操作炉型稳定性' THEN 4                      WHEN '煤气流分布稳定性' THEN 5                      ELSE 99                      END;
### Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped expression, DRIVER=4.34.30
; bad SQL grammar []] with root cause

com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped expression, DRIVER=4.34.30
	at com.ibm.db2.jcc.am.b5.a(b5.java:810) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:66) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:140) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.c(kq.java:2890) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.d(kq.java:2874) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.a(kq.java:2278) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:8479) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.i(aa.java:202) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.b(aa.java:92) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.p.a(p.java:32) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.au.i(au.java:150) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.al(kq.java:2247) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bq(kr.java:3909) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:4792) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.b(kr.java:4363) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bg(kr.java:3027) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.execute(kr.java:3002) ~[db2jcc-4.34.30.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-6.3.2.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T15:59:40.549+08:00  INFO 21808 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T15:59:40.612+08:00  INFO 21808 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T15:59:40.616+08:00  INFO 21808 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T15:59:40.620+08:00  INFO 21808 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T15:59:43.438+08:00  INFO 34632 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 34632 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T15:59:43.440+08:00  INFO 34632 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T15:59:44.402+08:00  INFO 34632 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T15:59:44.411+08:00  INFO 34632 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T15:59:44.412+08:00  INFO 34632 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T15:59:44.463+08:00  INFO 34632 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T15:59:44.463+08:00  INFO 34632 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 972 ms
2025-09-13T15:59:45.061+08:00  INFO 34632 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T15:59:45.071+08:00  INFO 34632 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 2.256 seconds (process running for 3.04)
2025-09-13T15:59:50.544+08:00  INFO 34632 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T15:59:50.544+08:00  INFO 34632 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T15:59:50.545+08:00  INFO 34632 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T15:59:50.627+08:00  INFO 34632 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T15:59:50.643+08:00  INFO 34632 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T15:59:51.756+08:00  INFO 34632 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@3cf0777a
2025-09-13T15:59:51.758+08:00  INFO 34632 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T16:01:46.854+08:00  INFO 34632 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T16:01:47.021+08:00  INFO 34632 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T16:01:47.034+08:00  INFO 34632 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T16:01:47.042+08:00  INFO 34632 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T18:18:09.628+08:00  INFO 11360 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 11360 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T18:18:09.629+08:00  INFO 11360 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T18:18:10.135+08:00  INFO 11360 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T18:18:10.143+08:00  INFO 11360 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T18:18:10.143+08:00  INFO 11360 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T18:18:10.181+08:00  INFO 11360 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T18:18:10.181+08:00  INFO 11360 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 527 ms
2025-09-13T18:18:10.540+08:00  INFO 11360 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T18:18:10.546+08:00  INFO 11360 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 1.214 seconds (process running for 1.616)
2025-09-13T18:18:21.473+08:00  INFO 11360 --- [score-api] [http-nio-8090-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T18:18:21.473+08:00  INFO 11360 --- [score-api] [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T18:18:21.474+08:00  INFO 11360 --- [score-api] [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T18:18:21.586+08:00  INFO 11360 --- [score-api] [http-nio-8090-exec-3] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T18:18:21.605+08:00  INFO 11360 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T18:18:23.026+08:00  INFO 11360 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@6f1e8780
2025-09-13T18:18:23.028+08:00  INFO 11360 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T18:18:45.488+08:00  INFO 11360 --- [score-api] [http-nio-8090-exec-4] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T18:23:11.282+08:00  INFO 11360 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T18:23:11.303+08:00  INFO 11360 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T18:23:11.305+08:00  INFO 11360 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T18:23:11.307+08:00  INFO 11360 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T18:23:14.555+08:00  INFO 30556 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 30556 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T18:23:14.557+08:00  INFO 30556 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T18:23:15.014+08:00  INFO 30556 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T18:23:15.021+08:00  INFO 30556 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T18:23:15.021+08:00  INFO 30556 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T18:23:15.056+08:00  INFO 30556 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T18:23:15.056+08:00  INFO 30556 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 478 ms
2025-09-13T18:23:15.378+08:00  INFO 30556 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T18:23:15.382+08:00  INFO 30556 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 1.094 seconds (process running for 1.417)
2025-09-13T18:23:20.978+08:00  INFO 30556 --- [score-api] [http-nio-8090-exec-4] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T18:23:20.978+08:00  INFO 30556 --- [score-api] [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T18:23:20.979+08:00  INFO 30556 --- [score-api] [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T18:23:21.020+08:00  INFO 30556 --- [score-api] [http-nio-8090-exec-4] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T18:23:21.029+08:00  INFO 30556 --- [score-api] [http-nio-8090-exec-4] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T18:23:22.220+08:00  INFO 30556 --- [score-api] [http-nio-8090-exec-4] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@22ef6bde
2025-09-13T18:23:22.222+08:00  INFO 30556 --- [score-api] [http-nio-8090-exec-4] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T18:30:37.497+08:00  INFO 30556 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T18:30:37.521+08:00  INFO 30556 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T18:30:37.523+08:00  INFO 30556 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T18:30:37.941+08:00  INFO 30556 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T18:30:40.800+08:00  INFO 10936 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 10936 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T18:30:40.802+08:00  INFO 10936 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T18:30:41.198+08:00  INFO 10936 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T18:30:41.204+08:00  INFO 10936 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T18:30:41.204+08:00  INFO 10936 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T18:30:41.231+08:00  INFO 10936 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T18:30:41.231+08:00  INFO 10936 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 410 ms
2025-09-13T18:30:41.500+08:00  INFO 10936 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T18:30:41.505+08:00  INFO 10936 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.932 seconds (process running for 1.215)
2025-09-13T18:33:57.421+08:00  INFO 10936 --- [score-api] [http-nio-8090-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T18:33:57.422+08:00  INFO 10936 --- [score-api] [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T18:33:57.423+08:00  INFO 10936 --- [score-api] [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T18:33:57.477+08:00  INFO 10936 --- [score-api] [http-nio-8090-exec-3] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T18:33:57.491+08:00  INFO 10936 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T18:33:58.586+08:00  INFO 10936 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@697c4f44
2025-09-13T18:33:58.587+08:00  INFO 10936 --- [score-api] [http-nio-8090-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T18:33:58.990+08:00  INFO 10936 --- [score-api] [http-nio-8090-exec-3] c.e.score.api.ScoreControllerNested      : selectImpactRows size=0
2025-09-13T18:34:08.789+08:00  INFO 10936 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T18:34:08.813+08:00  INFO 10936 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T18:34:08.815+08:00  INFO 10936 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T18:34:08.817+08:00  INFO 10936 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T18:34:10.147+08:00  INFO 30140 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 30140 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T18:34:10.148+08:00  INFO 30140 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T18:34:10.541+08:00  INFO 30140 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T18:34:10.546+08:00  INFO 30140 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T18:34:10.547+08:00  INFO 30140 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T18:34:10.575+08:00  INFO 30140 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T18:34:10.575+08:00  INFO 30140 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 407 ms
2025-09-13T18:34:10.850+08:00  INFO 30140 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T18:34:10.855+08:00  INFO 30140 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.969 seconds (process running for 1.29)
2025-09-13T18:34:18.600+08:00  INFO 30140 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T18:34:18.601+08:00  INFO 30140 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T18:34:18.603+08:00  INFO 30140 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T18:34:18.723+08:00  INFO 30140 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T18:34:18.742+08:00  INFO 30140 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T18:34:19.859+08:00  INFO 30140 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@2da267b1
2025-09-13T18:34:19.862+08:00  INFO 30140 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T18:34:20.275+08:00  INFO 30140 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : selectImpactRows size=0
2025-09-13T18:34:22.722+08:00  INFO 30140 --- [score-api] [http-nio-8090-exec-4] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T18:34:23.410+08:00  INFO 30140 --- [score-api] [http-nio-8090-exec-4] c.e.score.api.ScoreControllerNested      : selectImpactRows size=0
2025-09-13T18:37:31.107+08:00  INFO 30140 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T18:37:31.131+08:00  INFO 30140 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T18:37:31.135+08:00  INFO 30140 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T18:37:31.136+08:00  INFO 30140 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T18:37:34.123+08:00  INFO 30004 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 30004 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T18:37:34.124+08:00  INFO 30004 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T18:37:34.525+08:00  INFO 30004 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T18:37:34.532+08:00  INFO 30004 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T18:37:34.532+08:00  INFO 30004 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T18:37:34.560+08:00  INFO 30004 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T18:37:34.560+08:00  INFO 30004 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 417 ms
2025-09-13T18:37:34.832+08:00  INFO 30004 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T18:37:34.837+08:00  INFO 30004 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.933 seconds (process running for 1.221)
2025-09-13T18:37:45.454+08:00  INFO 30004 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T18:37:45.480+08:00  INFO 30004 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T18:37:46.932+08:00  INFO 31200 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 31200 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T18:37:46.933+08:00  INFO 31200 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T18:37:47.356+08:00  INFO 31200 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T18:37:47.364+08:00  INFO 31200 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T18:37:47.364+08:00  INFO 31200 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T18:37:47.398+08:00  INFO 31200 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T18:37:47.398+08:00  INFO 31200 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 446 ms
2025-09-13T18:37:47.659+08:00  INFO 31200 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T18:37:47.664+08:00  INFO 31200 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 1.012 seconds (process running for 1.394)
2025-09-13T18:37:56.074+08:00  INFO 31200 --- [score-api] [http-nio-8090-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T18:37:56.074+08:00  INFO 31200 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T18:37:56.075+08:00  INFO 31200 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T18:37:56.117+08:00  INFO 31200 --- [score-api] [http-nio-8090-exec-2] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T18:37:56.127+08:00  INFO 31200 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T18:37:57.577+08:00  INFO 31200 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@78183226
2025-09-13T18:37:57.579+08:00  INFO 31200 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T18:37:58.450+08:00 ERROR 31200 --- [score-api] [http-nio-8090-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped expression, DRIVER=4.34.30
### The error may exist in file [F:\Users\lenovo\Desktop\score-api\target\classes\mapper\ScoreMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: -- 两段时间窗：[time, time+59s]         WITH win(w, t_start, t_end, t_in14) AS (             VALUES                 (1, TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS'),                  TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS, ?),                 (2, TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS'),                  TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS, ?)         ),               -- 顶层：每个窗内优先=入参秒，否则窗内最新              top_src AS (                  SELECT                      w.w,                      i.GENERATE_TIME                                    AS gt,                      VARCHAR_FORMAT(i.GENERATE_TIME,'YYYYMMDDHH24MISS') AS markTime,                      i.INDEX_VALUE                                      AS topIndexValue,                      CASE WHEN i.GENERATE_TIME = w.t_start THEN 0 ELSE 1 END AS pref                  FROM win w                           JOIN T_MD_DIAGNOSE_MODEL_DATA_INDEX i                                ON i.INDEX_ID = 'B4TEN_I'                                    AND i.GENERATE_TIME BETWEEN w.t_start AND w.t_end              ),              top_pick AS (                  SELECT w, markTime, gt, topIndexValue                  FROM (                           SELECT w, markTime, gt, topIndexValue,                                  ROW_NUMBER() OVER (PARTITION BY w ORDER BY pref ASC, gt DESC) rn                           FROM top_src                       ) t                  WHERE rn = 1              ),               -- 子指数定义：仅取属于 B4TEN_I 的那五个；并给定固定顺序              sub_def AS (                  SELECT                      si.SUBINDEX_ID,                      si.SUBINDEX_NAME,                      si.INDEX_ID   AS subIndexCode,                      si.WEIGHT     AS subIndexWeight,                      CASE si.SUBINDEX_NAME                          WHEN '下料稳定性' THEN 1                          WHEN '压量关系稳定性' THEN 2                          WHEN '炉缸工况稳定性' THEN 3                          WHEN '操作炉型稳定性' THEN 4                          WHEN '煤气流分布稳定性' THEN 5                          ELSE 99                          END AS ord                  FROM T_MD_DIAGNOSE_MODEL_SUBINDEX_INFO si                  WHERE si.INDEX_ID = 'B4TEN_I'                    AND si.SUBINDEX_NAME IN ('下料稳定性','压量关系稳定性','炉缸工况稳定性','操作炉型稳定性','煤气流分布稳定性')              ),               -- 子指数取值：与顶层选出的 markTime（同一秒）匹配              sub_match AS (                  SELECT                      tp.w,                      tp.markTime,                      sd.SUBINDEX_NAME,                      sd.subIndexCode,                      sd.subIndexWeight,                      d.SUBINDEX_VALUE,                      ROW_NUMBER() OVER (                     PARTITION BY tp.w, sd.SUBINDEX_NAME                     ORDER BY d.GENERATE_TIME DESC                 ) rn                  FROM top_pick tp                           CROSS JOIN sub_def sd                           LEFT JOIN T_MD_DIAGNOSE_MODEL_DATA_SUBINDEX d                                     ON d.SUBINDEX_ID = sd.SUBINDEX_ID                                         AND VARCHAR_FORMAT(d.GENERATE_TIME,'YYYYMMDDHH24MISS') = tp.markTime              )          SELECT             tp.markTime                       AS markTime,             tp.topIndexValue                  AS topIndexValue,              sm.SUBINDEX_NAME                  AS subIndexName,             sm.subIndexCode                   AS subIndexCode,             sm.subIndexWeight                 AS subIndexWeight,             sm.SUBINDEX_VALUE                 AS subIndexValue         FROM top_pick tp                  LEFT JOIN (SELECT * FROM sub_match WHERE rn = 1) sm                            ON sm.w = tp.w         ORDER BY tp.markTime ASC,                  CASE sm.SUBINDEX_NAME                      WHEN '下料稳定性' THEN 1                      WHEN '压量关系稳定性' THEN 2                      WHEN '炉缸工况稳定性' THEN 3                      WHEN '操作炉型稳定性' THEN 4                      WHEN '煤气流分布稳定性' THEN 5                      ELSE 99                      END;
### Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped expression, DRIVER=4.34.30
; bad SQL grammar []] with root cause

com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped expression, DRIVER=4.34.30
	at com.ibm.db2.jcc.am.b5.a(b5.java:810) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:66) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:140) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.c(kq.java:2890) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.d(kq.java:2874) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.a(kq.java:2278) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:8479) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.i(aa.java:202) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.b(aa.java:92) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.p.a(p.java:32) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.au.i(au.java:150) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.al(kq.java:2247) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bq(kr.java:3909) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:4792) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.b(kr.java:4363) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bg(kr.java:3027) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.execute(kr.java:3002) ~[db2jcc-4.34.30.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-6.3.2.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:69) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T18:40:57.599+08:00  INFO 31200 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T18:40:57.623+08:00  INFO 31200 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T18:40:57.624+08:00  INFO 31200 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T18:40:57.626+08:00  INFO 31200 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T18:40:59.105+08:00  INFO 12944 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 12944 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T18:40:59.107+08:00  INFO 12944 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T18:40:59.535+08:00  INFO 12944 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T18:40:59.540+08:00  INFO 12944 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T18:40:59.541+08:00  INFO 12944 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T18:40:59.569+08:00  INFO 12944 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T18:40:59.569+08:00  INFO 12944 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 442 ms
2025-09-13T18:40:59.843+08:00  INFO 12944 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T18:40:59.847+08:00  INFO 12944 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.976 seconds (process running for 1.276)
2025-09-13T18:41:03.047+08:00  INFO 12944 --- [score-api] [http-nio-8090-exec-7] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T18:41:03.048+08:00  INFO 12944 --- [score-api] [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T18:41:03.048+08:00  INFO 12944 --- [score-api] [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T18:41:03.091+08:00  INFO 12944 --- [score-api] [http-nio-8090-exec-7] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T18:41:03.101+08:00  INFO 12944 --- [score-api] [http-nio-8090-exec-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T18:41:05.208+08:00  INFO 12944 --- [score-api] [http-nio-8090-exec-7] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@1f66432d
2025-09-13T18:41:05.209+08:00  INFO 12944 --- [score-api] [http-nio-8090-exec-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T18:41:05.565+08:00  INFO 12944 --- [score-api] [http-nio-8090-exec-7] c.e.score.api.ScoreControllerNested      : selectImpactRows size=0
2025-09-13T18:43:05.871+08:00  INFO 12944 --- [score-api] [http-nio-8090-exec-5] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T18:43:06.387+08:00  INFO 12944 --- [score-api] [http-nio-8090-exec-5] c.e.score.api.ScoreControllerNested      : selectImpactRows size=10
2025-09-13T18:43:52.971+08:00  INFO 12944 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T18:43:53.061+08:00  INFO 12944 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T18:43:53.078+08:00  INFO 12944 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T18:43:53.080+08:00  INFO 12944 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T18:56:48.054+08:00  INFO 30064 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 30064 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T18:56:48.055+08:00  INFO 30064 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T18:56:48.451+08:00  INFO 30064 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T18:56:48.457+08:00  INFO 30064 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T18:56:48.457+08:00  INFO 30064 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T18:56:48.485+08:00  INFO 30064 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T18:56:48.485+08:00  INFO 30064 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 411 ms
2025-09-13T18:56:48.755+08:00  INFO 30064 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T18:56:48.760+08:00  INFO 30064 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.936 seconds (process running for 1.23)
2025-09-13T18:56:51.615+08:00  INFO 30064 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T18:56:51.616+08:00  INFO 30064 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T18:56:51.616+08:00  INFO 30064 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T18:56:51.661+08:00  INFO 30064 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T18:56:51.671+08:00  INFO 30064 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T18:56:52.863+08:00  INFO 30064 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@1ef750d6
2025-09-13T18:56:52.864+08:00  INFO 30064 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T18:56:53.309+08:00 ERROR 30064 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped expression, DRIVER=4.34.30
### The error may exist in file [F:\Users\lenovo\Desktop\score-api\target\classes\mapper\ScoreMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: WITH win(w, t_start, t_end, t_in14) AS (             VALUES                 (1, TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS'),                  TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS, ?),                 (2, TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS'),                  TIMESTAMP_FORMAT(?, 'YYYYMMDDHH24MISS') + 59 SECONDS, ?)         ),               -- 顶层（总指数）：每窗一条（优先等于入参秒，否则窗内最新）              top_src AS (                  SELECT                      w,                      i.GENERATE_TIME                                    AS gt,                      VARCHAR_FORMAT(i.GENERATE_TIME,'YYYYMMDDHH24MISS') AS markTime,                      i.INDEX_VALUE                                      AS topIndexValue,                      CASE WHEN i.GENERATE_TIME = t_start THEN 0 ELSE 1 END AS pref                  FROM (                           SELECT w, t_start, t_end FROM win                       ) x                           JOIN T_MD_DIAGNOSE_MODEL_DATA_INDEX i                                ON i.INDEX_ID = 'B4TEN_I'                                    AND i.GENERATE_TIME BETWEEN x.t_start AND x.t_end              ),              top_pick AS (                  SELECT w, markTime, gt, topIndexValue                  FROM (                           SELECT w, markTime, gt, topIndexValue,                                  ROW_NUMBER() OVER (PARTITION BY w ORDER BY pref ASC, gt DESC) rn                           FROM top_src                       ) t                  WHERE rn = 1              ),               -- 子指数定义清单（固定顺序 + 兜底占位）              sub_def AS (                  SELECT                      si.SUBINDEX_ID,                      si.SUBINDEX_NAME,                      si.INDEX_ID   AS subIndexCode,                      si.WEIGHT     AS subIndexWeight,                      CASE si.SUBINDEX_NAME                          WHEN '下料稳定性' THEN 1                          WHEN '压量关系稳定性' THEN 2                          WHEN '炉缸工况稳定性' THEN 3                          WHEN '操作炉型稳定性' THEN 4                          WHEN '煤气流分布稳定性' THEN 5                          ELSE 99                          END AS ord                  FROM T_MD_DIAGNOSE_MODEL_SUBINDEX_INFO si                  WHERE si.INDEX_ID = 'B4TEN_I'                    AND si.SUBINDEX_NAME IN ('下料稳定性','压量关系稳定性','炉缸工况稳定性','操作炉型稳定性','煤气流分布稳定性')              ),               -- 子指数取值（同秒对齐）              sub_val AS (                  SELECT                      tp.w,                      sd.SUBINDEX_ID,                      sd.SUBINDEX_NAME,                      sd.subIndexCode,                      sd.subIndexWeight,                      d.SUBINDEX_VALUE,                      ROW_NUMBER() OVER (                     PARTITION BY tp.w, sd.SUBINDEX_ID                     ORDER BY d.GENERATE_TIME DESC                 ) rn                  FROM top_pick tp                           CROSS JOIN sub_def sd                           LEFT JOIN T_MD_DIAGNOSE_MODEL_DATA_SUBINDEX d                                     ON d.SUBINDEX_ID = sd.SUBINDEX_ID                                         AND VARCHAR_FORMAT(d.GENERATE_TIME,'YYYYMMDDHH24MISS') = tp.markTime              ),              sub_pick AS (                  SELECT                      w,                      SUBINDEX_ID,                      SUBINDEX_NAME,                      subIndexCode,                      subIndexWeight,                      CASE WHEN rn = 1 THEN SUBINDEX_VALUE ELSE NULL END AS subIndexValue                  FROM sub_val                  WHERE rn = 1 OR rn IS NULL              ),               -- 评价参数定义（按子指数取权重，连到参数信息）              param_def AS (                  SELECT                      sd.SUBINDEX_ID,                      w.PARAM_SCORE_ID         AS paramCode,                      psi.NAME                 AS paramName,                      w.WEIGHT                 AS paramWeight                  FROM sub_def sd                           JOIN T_MD_DIAGNOSE_MODEL_PARAM_WEIGHT w                                ON w.SUBINDEX_ID = sd.SUBINDEX_ID                           JOIN T_MD_DIAGNOSE_PARAM_SCORE_INFO psi                                ON psi.PARAM_SCORE_ID = w.PARAM_SCORE_ID              ),               -- 评价参数取值（同秒对齐，FETCH_TIME）              param_val AS (                  SELECT                      tp.w,                      pd.SUBINDEX_ID,                      pd.paramCode,                      pd.paramName,                      pd.paramWeight,                      psd.DATA_VALUE           AS paramValue,                      ROW_NUMBER() OVER (                     PARTITION BY tp.w, pd.SUBINDEX_ID, pd.paramCode                     ORDER BY psd.FETCH_TIME DESC                 ) rn                  FROM top_pick tp                           JOIN param_def pd                                ON 1 = 1                           LEFT JOIN T_MD_DIAGNOSE_PARAM_SCORE_DATA psd                                     ON psd.PARAM_SCORE_ID = pd.paramCode                                         AND VARCHAR_FORMAT(psd.FETCH_TIME,'YYYYMMDDHH24MISS') = tp.markTime              ),              param_pick AS (                  SELECT                      w, SUBINDEX_ID, paramCode, paramName, paramWeight,                      CASE WHEN rn = 1 THEN paramValue ELSE NULL END AS paramValue                  FROM param_val                  WHERE rn = 1 OR rn IS NULL              )          SELECT             -- 顶层             tp.markTime                      AS markTime,             tp.topIndexValue                 AS topIndexValue,              -- 子指数             sp.SUBINDEX_NAME                 AS subIndexName,             sp.subIndexCode                  AS subIndexCode,             sp.subIndexWeight                AS subIndexWeight,             sp.subIndexValue                 AS subIndexValue,              -- 评价参数             pp.paramName                     AS paramName,             pp.paramCode                     AS paramCode,             pp.paramWeight                   AS paramWeight,             pp.paramValue                    AS paramValue          FROM top_pick tp                  LEFT JOIN sub_pick sp                            ON sp.w = tp.w                  LEFT JOIN param_pick pp                            ON pp.w = tp.w                                AND pp.SUBINDEX_ID = sp.SUBINDEX_ID          ORDER BY tp.markTime ASC,                  CASE sp.SUBINDEX_NAME                      WHEN '下料稳定性' THEN 1                      WHEN '压量关系稳定性' THEN 2                      WHEN '炉缸工况稳定性' THEN 3                      WHEN '操作炉型稳定性' THEN 4                      WHEN '煤气流分布稳定性' THEN 5                      ELSE 99                      END,                  pp.paramCode;
### Cause: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped expression, DRIVER=4.34.30
; bad SQL grammar []] with root cause

com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped expression, DRIVER=4.34.30
	at com.ibm.db2.jcc.am.b5.a(b5.java:810) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:66) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.b5.a(b5.java:140) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.c(kq.java:2890) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.d(kq.java:2874) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.a(kq.java:2278) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:8479) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.i(aa.java:202) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.aa.b(aa.java:92) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.p.a(p.java:32) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.t4.au.i(au.java:150) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kq.al(kq.java:2247) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bq(kr.java:3909) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.a(kr.java:4792) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.b(kr.java:4363) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.bg(kr.java:3027) ~[db2jcc-4.34.30.jar:na]
	at com.ibm.db2.jcc.am.kr.execute(kr.java:3002) ~[db2jcc-4.34.30.jar:na]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-6.3.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-6.3.2.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.19.jar:3.5.19]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at jdk.proxy2/jdk.proxy2.$Proxy64.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194) ~[mybatis-spring-3.0.5.jar:3.0.5]
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141) ~[mybatis-3.5.19.jar:3.5.19]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86) ~[mybatis-3.5.19.jar:3.5.19]
	at jdk.proxy2/jdk.proxy2.$Proxy65.selectImpactRows(Unknown Source) ~[na:na]
	at com.example.score.api.ScoreControllerNested.getNested(ScoreControllerNested.java:69) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.44.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-09-13T20:32:26.582+08:00  WARN 30064 --- [score-api] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection com.ibm.db2.jcc.t4.b@194d0038 ([jcc][t4][10335][10366][4.34.30] 操作无效：连接已关闭。 ERRORCODE=-4470, SQLSTATE=08003). Possibly consider using a shorter maxLifetime value.
2025-09-13T22:10:57.437+08:00  INFO 30064 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T22:10:57.464+08:00  INFO 30064 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T22:10:57.469+08:00  INFO 30064 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T22:10:57.473+08:00  INFO 30064 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T22:10:59.389+08:00  INFO 35672 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 35672 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T22:10:59.390+08:00  INFO 35672 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T22:10:59.820+08:00  INFO 35672 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T22:10:59.827+08:00  INFO 35672 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T22:10:59.827+08:00  INFO 35672 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T22:10:59.863+08:00  INFO 35672 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T22:10:59.864+08:00  INFO 35672 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 453 ms
2025-09-13T22:11:00.181+08:00  INFO 35672 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T22:11:00.185+08:00  INFO 35672 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 1.039 seconds (process running for 1.372)
2025-09-13T22:11:04.079+08:00  INFO 35672 --- [score-api] [http-nio-8090-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T22:11:04.079+08:00  INFO 35672 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T22:11:04.080+08:00  INFO 35672 --- [score-api] [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-13T22:11:04.122+08:00  INFO 35672 --- [score-api] [http-nio-8090-exec-2] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T22:11:04.132+08:00  INFO 35672 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T22:11:05.904+08:00  INFO 35672 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@3d0cd0a4
2025-09-13T22:11:05.905+08:00  INFO 35672 --- [score-api] [http-nio-8090-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T22:56:50.578+08:00  INFO 35672 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T22:56:50.603+08:00  INFO 35672 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T22:56:50.606+08:00  INFO 35672 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T22:56:50.608+08:00  INFO 35672 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T22:56:53.108+08:00  INFO 35524 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 35524 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T22:56:53.109+08:00  INFO 35524 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T22:56:53.512+08:00  INFO 35524 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T22:56:53.519+08:00  INFO 35524 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T22:56:53.519+08:00  INFO 35524 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T22:56:53.553+08:00  INFO 35524 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T22:56:53.554+08:00  INFO 35524 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 425 ms
2025-09-13T22:56:53.869+08:00  INFO 35524 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T22:56:53.874+08:00  INFO 35524 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 0.988 seconds (process running for 1.27)
2025-09-13T22:56:56.809+08:00  INFO 35524 --- [score-api] [http-nio-8090-exec-7] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T22:56:56.809+08:00  INFO 35524 --- [score-api] [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T22:56:56.810+08:00  INFO 35524 --- [score-api] [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T22:56:56.853+08:00  INFO 35524 --- [score-api] [http-nio-8090-exec-7] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T22:56:56.862+08:00  INFO 35524 --- [score-api] [http-nio-8090-exec-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T22:56:58.377+08:00  INFO 35524 --- [score-api] [http-nio-8090-exec-7] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@4c5e66b7
2025-09-13T22:56:58.378+08:00  INFO 35524 --- [score-api] [http-nio-8090-exec-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T22:58:22.426+08:00  INFO 35524 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T22:58:22.485+08:00  INFO 35524 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T22:58:22.489+08:00  INFO 35524 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T22:58:22.494+08:00  INFO 35524 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-13T23:50:35.319+08:00  INFO 6232 --- [score-api] [main] com.example.score.ScoreApiApplication    : Starting ScoreApiApplication using Java 17.0.14 with PID 6232 (F:\Users\lenovo\Desktop\score-api\target\classes started by lenovo in F:\Users\lenovo\Desktop\score-api)
2025-09-13T23:50:35.323+08:00  INFO 6232 --- [score-api] [main] com.example.score.ScoreApiApplication    : The following 1 profile is active: "dev"
2025-09-13T23:50:36.679+08:00  INFO 6232 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8090 (http)
2025-09-13T23:50:36.695+08:00  INFO 6232 --- [score-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-13T23:50:36.695+08:00  INFO 6232 --- [score-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-13T23:50:36.780+08:00  INFO 6232 --- [score-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-13T23:50:36.782+08:00  INFO 6232 --- [score-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1400 ms
2025-09-13T23:50:37.721+08:00  INFO 6232 --- [score-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8090 (http) with context path '/'
2025-09-13T23:50:37.733+08:00  INFO 6232 --- [score-api] [main] com.example.score.ScoreApiApplication    : Started ScoreApiApplication in 3.113 seconds (process running for 4.088)
2025-09-13T23:50:50.654+08:00  INFO 6232 --- [score-api] [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-13T23:50:50.654+08:00  INFO 6232 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-13T23:50:50.654+08:00  INFO 6232 --- [score-api] [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-13T23:50:50.808+08:00  INFO 6232 --- [score-api] [http-nio-8090-exec-1] c.e.score.api.ScoreControllerNested      : useDb=true, mapperPresent=true
2025-09-13T23:50:50.832+08:00  INFO 6232 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-13T23:50:52.919+08:00  INFO 6232 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.ibm.db2.jcc.t4.b@4a9c865b
2025-09-13T23:50:52.919+08:00  INFO 6232 --- [score-api] [http-nio-8090-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-13T23:51:59.137+08:00  INFO 6232 --- [score-api] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-13T23:51:59.232+08:00  INFO 6232 --- [score-api] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-13T23:51:59.247+08:00  INFO 6232 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-13T23:51:59.253+08:00  INFO 6232 --- [score-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
